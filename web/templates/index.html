<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STORYCUT v2.0 - AI ìŠ¤í† ë¦¬ ì˜ìƒ ìƒì„±ê¸°</title>
    <link rel="stylesheet" href="/static/style.css?v=20260208">
    <style>
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            box-sizing: border-box;
            background-color: #1e1e1e;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        .input-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* Nav & History Styles */
        .nav-links {
            margin-top: 15px;
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .nav-link {
            text-decoration: none;
            color: #aaa;
            font-weight: bold;
            font-size: 1rem;
            transition: color 0.2s;
            padding-bottom: 5px;
            border-bottom: 2px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #00adb5;
            border-bottom-color: #00adb5;
        }

        .retention-notice {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            border-radius: 8px;
            padding: 10px 14px;
            margin-bottom: 16px;
            font-size: 0.82rem;
            color: #ffc107;
            line-height: 1.5;
        }

        .history-filter-tabs {
            display: flex;
            gap: 4px;
            background: #1a1a2e;
            padding: 3px;
            border-radius: 8px;
            border: 1px solid #393e46;
        }
        .history-filter-btn {
            padding: 6px 16px;
            border: none;
            border-radius: 6px;
            background: transparent;
            color: #888;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }
        .history-filter-btn:hover { color: #ccc; }
        .history-filter-btn.active {
            background: #00adb5;
            color: #fff;
            font-weight: bold;
        }

        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .history-card {
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
        }

        .history-card:hover {
            transform: translateY(-5px);
            border-color: #00adb5;
        }

        .history-thumb {
            width: 100%;
            height: 160px;
            background: #1a1a2e;
            object-fit: cover;
            display: block;
            position: relative;
        }

        .history-info {
            padding: 15px;
        }

        .history-title {
            color: #fff;
            font-weight: bold;
            font-size: 1.1rem;
            margin: 0 0 10px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history-date {
            color: #888;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .history-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            background: #393e46;
            color: #ccc;
        }

        .history-status.completed {
            background: #00adb5;
            color: #fff;
        }

        /* íƒ€ì… ë±ƒì§€ (MV / Video) */
        .history-type-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
            z-index: 1;
        }
        .history-type-badge.mv {
            background: #e91e63;
            color: #fff;
        }
        .history-type-badge.video {
            background: #00adb5;
            color: #fff;
        }

        /* MV ë³´ê´€í•¨ ì¹´ë“œ ì¶”ê°€ ì •ë³´ */
        .history-mv-info {
            color: #aaa;
            font-size: 0.75rem;
            margin: 0 0 6px 0;
        }

        /* ë³´ê´€í•¨ ì´ë¯¸ì§€ íŒ¨ë„ íƒ€ì„ìŠ¤íƒ¬í”„ ë±ƒì§€ */
        .scene-time-badge {
            font-size: 0.7rem;
            color: #00adb5;
            background: rgba(0, 173, 181, 0.15);
            padding: 2px 6px;
            border-radius: 4px;
            display: inline-block;
            margin-bottom: 4px;
        }

        /* ë³´ê´€í•¨ ëª¨ë“œ - ì¬ìƒì„± ë²„íŠ¼ ìˆ¨ê¹€ */
        .archive-image-card .scene-card-actions {
            display: none;
        }

        /* ë‚´ë ˆì´ì…˜ ì¸ë¼ì¸ í¸ì§‘ */
        .narration-edit-area {
            width: 100%;
            min-height: 60px;
            background: #1a1a2e;
            color: #fff;
            border: 1px solid #00adb5;
            border-radius: 6px;
            padding: 8px;
            font-size: 0.85rem;
            resize: vertical;
            font-family: inherit;
        }
        .narration-edit-actions {
            display: flex;
            gap: 6px;
            margin-top: 6px;
        }
        .narration-edit-actions button {
            padding: 4px 12px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .btn-narration-save {
            background: #00adb5;
            color: #fff;
        }
        .btn-narration-cancel {
            background: #393e46;
            color: #ccc;
        }
        .btn-edit-narration {
            background: none;
            border: none;
            color: #00adb5;
            cursor: pointer;
            font-size: 0.8rem;
            padding: 2px 6px;
            margin-left: 4px;
        }
        .btn-edit-narration:hover {
            text-decoration: underline;
        }

        /* Additional styles for review and progress */
        .preview-container {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #252a34;
            border-radius: 12px;
            border: 1px solid #393e46;
        }

        .story-preview h3,
        .visual-preview h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: #00adb5;
            font-size: 1.2rem;
        }

        .script-content {
            background: #1a1a2e;
            padding: 1rem;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #eeeeee;
            line-height: 1.5;
        }

        .scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .scene-card {
            background: #1a1a2e;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #393e46;
            transition: transform 0.2s;
        }

        .scene-card:hover {
            transform: scale(1.05);
        }

        .scene-card img {
            width: 100%;
            height: 85px;
            object-fit: cover;
            display: block;
        }

        .scene-card .scene-info {
            padding: 8px;
            font-size: 0.8em;
            color: #ccc;
        }

        .scene-card .scene-narration {
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
            display: block;
        }

        .scene-card .scene-visual {
            font-size: 0.75em;
            color: #888;
            font-style: italic;
            display: block;
        }

        .scene-placeholder {
            width: 100%;
            height: 100px;
            background: #252a34;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            font-size: 0.8rem;
        }

        /* Review Card Styles */
        .review-scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .review-card {
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .review-card-header {
            display: flex;
            justify-content: space-between;
            color: #00adb5;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .review-card label {
            font-size: 0.85rem;
            color: #ccc;
            margin-bottom: 2px;
            display: block;
        }

        .review-textarea {
            width: 100%;
            background: #393e46;
            border: 1px solid #222831;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            resize: vertical;
            min-height: 60px;
            box-sizing: border-box;
        }

        .visual-textarea {
            font-size: 0.85rem;
            color: #ddd;
            font-style: italic;
        }

        .review-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
            border-top: 1px solid #393e46;
            padding-top: 20px;
        }

        /* ì”¬ ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
        .scene-management {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #252a34;
            border-radius: 12px;
            border: 1px solid #393e46;
        }

        .scene-management h3 {
            color: #00adb5;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        .scene-management .section-description {
            color: #ccc;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .result-scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 1.5rem;
        }

        .result-scene-card {
            background: #1a1a2e;
            border: 1px solid #393e46;
            border-radius: 8px;
            padding: 15px;
            transition: border-color 0.2s;
        }

        .result-scene-card:hover {
            border-color: #00adb5;
        }

        .result-scene-card.regenerating {
            border-color: #f39c12;
            opacity: 0.7;
        }

        .result-scene-card.failed {
            border-color: #e74c3c;
        }

        .scene-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #393e46;
        }

        .scene-card-title {
            color: #00adb5;
            font-weight: bold;
            font-size: 1rem;
        }

        .scene-status-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .scene-status-badge.completed {
            background: #27ae60;
            color: #fff;
        }

        .scene-status-badge.failed {
            background: #e74c3c;
            color: #fff;
        }

        .scene-status-badge.regenerating {
            background: #f39c12;
            color: #fff;
        }

        .scene-card-narration {
            color: #ddd;
            font-size: 0.85rem;
            margin: 10px 0;
            line-height: 1.4;
            max-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .scene-card-visual {
            color: #888;
            font-size: 0.75rem;
            font-style: italic;
            margin-bottom: 10px;
            max-height: 40px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .scene-card-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .broll-badge {
            display: inline-block;
            background: linear-gradient(135deg, #1a7a2e, #2d9b42);
            color: #fff;
            padding: 6px 14px;
            border-radius: 6px;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .btn-regenerate {
            flex: 1;
            background: #393e46;
            color: #fff;
            border: 1px solid #555;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .btn-regenerate:hover {
            background: #00adb5;
            border-color: #00adb5;
        }

        .btn-regenerate:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* ì¬ìƒì„± ë¡œë”© ì˜¤ë²„ë ˆì´ */
        .scene-card-image {
            position: relative;
        }

        .regen-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 6px;
            z-index: 10;
            gap: 8px;
        }

        .regen-overlay .regen-spinner {
            width: 36px;
            height: 36px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top-color: #00adb5;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        .regen-overlay .regen-text {
            color: #fff;
            font-size: 0.8rem;
        }

        .regen-overlay.success {
            background: rgba(39, 174, 96, 0.8);
            animation: fadeOut 1.5s ease forwards;
        }

        .regen-overlay.success .regen-text {
            font-size: 1.2rem;
        }

        .scene-card-image .image-placeholder {
            width: 100%;
            aspect-ratio: 16/9;
            background: #2a2d35;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 2rem;
        }

        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* MV ì´ë¯¸ì§€ ë¦¬ë·° ì¹´ë“œ */
        .mv-review-card {
            background: #1a1a2e;
            border: 1px solid #393e46;
            border-radius: 8px;
            padding: 12px;
            transition: border-color 0.2s;
            position: relative;
        }
        .mv-review-card:hover { border-color: #00adb5; }
        .mv-review-card.regenerating { border-color: #f39c12; }
        .mv-review-card .mv-review-img-wrap {
            position: relative;
            border-radius: 6px;
            overflow: hidden;
        }
        .mv-review-card img {
            width: 100%;
            aspect-ratio: 16/9;
            object-fit: cover;
            border-radius: 6px;
            display: block;
        }
        .mv-review-card .mv-review-info {
            margin-top: 8px;
            font-size: 0.85rem;
            color: #ccc;
        }
        .mv-review-card .mv-review-lyrics {
            color: #aaa;
            font-size: 0.8rem;
            margin-top: 4px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .mv-review-card .mv-review-time {
            color: #00adb5;
            font-size: 0.75rem;
        }
        .mv-review-card .mv-review-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }
        .mv-review-card .mv-review-actions button {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #393e46;
            border-radius: 6px;
            background: #16213e;
            color: #eee;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.2s;
        }
        .mv-review-card .mv-review-actions button:hover { background: #1a1a40; border-color: #00adb5; }
        .mv-review-card .mv-review-actions button:disabled { opacity: 0.5; cursor: not-allowed; }
        .mv-review-card .i2v-badge {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(39, 174, 96, 0.9);
            color: #fff;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: bold;
        }

        /* MV ê²°ê³¼ ì”¬ ê·¸ë¦¬ë“œ (ë” ë„“ì€ ì¹´ë“œ) */
        #mv-result-scene-grid {
            grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
        }

        /* MV ê²°ê³¼ ì”¬ ì¹´ë“œ (ê°€ì‚¬ í¸ì§‘/ì¬ìƒì„± ì§€ì›) */
        .mv-result-card {
            background: #16213e;
            border-radius: 10px;
            overflow: hidden;
            border: 1px solid #393e46;
            transition: border-color 0.2s;
        }
        .mv-result-card:hover { border-color: #00adb5; }
        .mv-result-card .mv-result-img-wrap {
            position: relative;
            width: 100%;
            aspect-ratio: 16 / 9;
            overflow: hidden;
            background: #0f0f23;
        }
        .mv-result-card .mv-result-img-wrap img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        .mv-result-card .mv-result-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 10px 0;
            font-size: 0.85rem;
            color: #ccc;
        }
        .mv-result-card .mv-result-time { color: #00adb5; font-size: 0.75rem; }
        .mv-result-card .mv-result-lyrics {
            padding: 6px 10px;
            font-size: 0.8rem;
            color: #aaa;
            display: flex;
            align-items: flex-start;
            gap: 6px;
        }
        .mv-result-card .mv-result-lyrics .lyrics-text {
            flex: 1;
            word-break: break-word;
        }
        .mv-result-card .btn-edit-lyrics {
            background: none;
            border: none;
            color: #00adb5;
            cursor: pointer;
            font-size: 0.85rem;
            padding: 0 4px;
            flex-shrink: 0;
        }
        .mv-result-card .btn-edit-lyrics:hover { text-decoration: underline; }
        .mv-result-card .lyrics-edit-area {
            width: 100%;
            min-height: 50px;
            background: #1a1a2e;
            color: #fff;
            border: 1px solid #00adb5;
            border-radius: 6px;
            padding: 6px;
            font-size: 0.8rem;
            resize: vertical;
            font-family: inherit;
        }
        .mv-result-card .lyrics-edit-actions {
            display: flex;
            gap: 6px;
            margin-top: 4px;
        }
        .mv-result-card .lyrics-edit-actions button {
            padding: 3px 10px;
            border-radius: 4px;
            border: none;
            cursor: pointer;
            font-size: 0.75rem;
        }
        .mv-result-card .btn-lyrics-save { background: #00adb5; color: #fff; }
        .mv-result-card .btn-lyrics-cancel { background: #393e46; color: #ccc; }
        .mv-result-card .mv-result-actions {
            display: flex;
            gap: 8px;
            padding: 6px 10px 10px;
        }
        .mv-result-card .mv-result-regen-btn {
            flex: 1;
            padding: 6px 10px;
            border: 1px solid #393e46;
            border-radius: 6px;
            background: #16213e;
            color: #eee;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background 0.2s;
        }
        .mv-result-card .mv-result-regen-btn:hover { background: #1a1a40; border-color: #00adb5; }
        .mv-result-card .mv-result-regen-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* í† ìŠ¤íŠ¸ ì•Œë¦¼ */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .toast {
            padding: 12px 20px;
            border-radius: 8px;
            color: #fff;
            font-size: 0.9rem;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: slideIn 0.3s ease, fadeOut 3s ease 2s forwards;
            max-width: 350px;
        }

        .toast.success { background: #27ae60; }
        .toast.error { background: #e74c3c; }
        .toast.info { background: #2980b9; }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .recompose-actions {
            display: flex;
            justify-content: center;
            padding-top: 1rem;
            border-top: 1px solid #393e46;
        }

        .scene-error-message {
            color: #e74c3c;
            font-size: 0.75rem;
            margin-top: 5px;
            background: rgba(231, 76, 60, 0.1);
            padding: 5px 8px;
            border-radius: 4px;
        }

        /* ê°€ì‚¬ íƒ€ì´ë° ì—ë””í„° ëª¨ë‹¬ */
        .lyrics-timeline-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.7);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }
        .lyrics-timeline-overlay.active { display: flex; }
        .lyrics-timeline-modal {
            background: #1a1a2e;
            border: 1px solid #393e46;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            display: flex;
            flex-direction: column;
        }
        .lyrics-timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 20px;
            border-bottom: 1px solid #393e46;
        }
        .lyrics-timeline-header h3 { margin: 0; color: #00adb5; font-size: 1.1rem; }
        .lyrics-timeline-close {
            background: none; border: none; color: #aaa; font-size: 1.5rem; cursor: pointer;
        }
        .lyrics-timeline-close:hover { color: #fff; }
        .lyrics-timeline-body {
            flex: 1;
            overflow-y: auto;
            padding: 16px 20px;
        }
        .lyrics-timeline-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        .lyrics-timeline-table th {
            text-align: left;
            padding: 8px 6px;
            color: #aaa;
            border-bottom: 2px solid #393e46;
            font-weight: 600;
            position: sticky;
            top: 0;
            background: #1a1a2e;
        }
        .lyrics-timeline-table td {
            padding: 6px;
            border-bottom: 1px solid #2a2a3e;
            vertical-align: middle;
        }
        .lyrics-timeline-table tr:hover { background: rgba(0,173,181,0.05); }
        .lyrics-timeline-table .col-time { width: 80px; }
        .lyrics-timeline-table .col-stt { width: 35%; color: #888; }
        .lyrics-timeline-table .col-lyrics { width: auto; }
        .lyrics-timeline-table .col-del { width: 36px; text-align: center; }
        .lyrics-timeline-table input[type="text"] {
            width: 100%;
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 4px;
            color: #eee;
            padding: 5px 8px;
            font-size: 0.85rem;
        }
        .lyrics-timeline-table input[type="text"]:focus {
            border-color: #00adb5;
            outline: none;
        }
        .lyrics-timeline-table input.time-input {
            width: 70px;
            text-align: center;
            font-family: monospace;
        }
        .lyrics-timeline-table .stt-text { color: #777; font-style: italic; }
        .lyrics-timeline-table .btn-row-del {
            background: none; border: none; color: #e74c3c; cursor: pointer; font-size: 1rem;
            padding: 2px 6px; border-radius: 4px;
        }
        .lyrics-timeline-table .btn-row-del:hover { background: rgba(231,76,60,0.15); }
        .lyrics-timeline-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 20px;
            border-top: 1px solid #393e46;
            gap: 8px;
        }
        .lyrics-timeline-footer .footer-left { display: flex; gap: 8px; }
        .lyrics-timeline-footer .footer-right { display: flex; gap: 8px; }
        .lyrics-timeline-footer button {
            padding: 8px 16px;
            border: 1px solid #393e46;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
        }
        .btn-tl-add { background: #16213e; color: #ccc; }
        .btn-tl-add:hover { border-color: #00adb5; }
        .btn-tl-reset { background: #393e46; color: #ccc; }
        .btn-tl-reset:hover { background: #4a4f57; }
        .btn-tl-save { background: #00adb5; color: #fff; border-color: #00adb5; font-weight: 600; }
        .btn-tl-save:hover { background: #00959c; }
        .btn-tl-save:disabled { opacity: 0.5; cursor: not-allowed; }

        /* ì´ë¯¸ì§€ í”„ë¦¬ë·° ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .image-card {
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 8px;
            overflow: hidden;
            transition: border-color 0.2s, transform 0.2s;
        }

        .image-card:hover {
            border-color: #00adb5;
        }

        .image-card.hook-video {
            border-color: #8b5cf6;
            border-width: 2px;
        }

        .image-card-header {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: #1a1a2e;
            border-bottom: 1px solid #393e46;
        }

        .image-card-title {
            color: #00adb5;
            font-weight: bold;
        }

        .hook-badge {
            background: #8b5cf6;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .image-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background: #1a1a2e;
        }

        .image-card-body {
            padding: 15px;
        }

        .image-narration {
            color: #ddd;
            font-size: 0.9rem;
            margin-bottom: 10px;
            max-height: 60px;
            overflow: hidden;
        }

        .image-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .btn-image-action {
            padding: 8px 10px;
            background: #393e46;
            color: #fff;
            border: 1px solid #555;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            text-align: center;
        }

        .btn-image-action:hover {
            background: #00adb5;
            border-color: #00adb5;
        }

        .btn-image-action:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-i2v {
            background: #f39c12;
            border-color: #f39c12;
        }

        .btn-i2v:hover {
            background: #e67e22;
            border-color: #e67e22;
        }

        .btn-hook {
            background: #8b5cf6;
            border-color: #8b5cf6;
        }

        .btn-hook:hover {
            background: #7c3aed;
            border-color: #7c3aed;
        }

        .btn-hook.active {
            background: #6d28d9;
            box-shadow: 0 0 8px #8b5cf6;
        }
    </style>
    <script src="/static/auth.js"></script>
</head>

<body>
    <div class="container">
        <!-- í—¤ë” -->
        <header class="header">
            <h1>Storycut <span
                    style="font-size: 0.5em; background: #8b5cf6; padding: 2px 6px; border-radius: 4px; vertical-align: middle;">v2.7.0</span>
            </h1>
            <p class="tagline">ì´ì•¼ê¸°ë¥¼ ì…ë ¥í•˜ë©´, ì¡°íšŒìˆ˜ í„°ì§€ëŠ” ìœ íŠœë¸Œ ì˜ìƒì´ ì™„ì„±ë©ë‹ˆë‹¤</p>
            <nav class="nav-links">
                <a href="#" id="nav-create" class="nav-link active">ìƒˆ ì˜ìƒ ë§Œë“¤ê¸°</a>
                <a href="#" id="nav-mv" class="nav-link">ë®¤ì§ë¹„ë””ì˜¤</a>
                <a href="#" id="nav-history" class="nav-link">ë‚´ ë¹„ë””ì˜¤ (History)</a>
                <a href="/pricing.html" class="nav-link">Pricing</a>
            </nav>
        </header>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <!-- ì…ë ¥ í¼ -->
            <div id="input-section" class="section">
                <h2>ğŸ¬ ìƒˆ ì˜ìƒ ë§Œë“¤ê¸°</h2>

                <form id="generate-form" class="form">
                    <!-- ì…ë ¥ ëª¨ë“œ í† ê¸€ -->
                    <div class="form-group">
                        <div id="mode-toggle" style="display:flex; gap:0; border:1px solid rgba(255,255,255,0.15); border-radius:8px; overflow:hidden; margin-bottom:4px;">
                            <button type="button" id="mode-ai-story" class="mode-toggle-btn active"
                                style="flex:1; padding:10px 16px; border:none; cursor:pointer; font-size:14px; font-weight:600; transition:all 0.2s; background:rgba(139,92,246,0.3); color:#c4b5fd;">
                                AI ìŠ¤í† ë¦¬ ìƒì„±
                            </button>
                            <button type="button" id="mode-direct-script" class="mode-toggle-btn"
                                style="flex:1; padding:10px 16px; border:none; cursor:pointer; font-size:14px; font-weight:600; transition:all 0.2s; background:rgba(255,255,255,0.05); color:rgba(255,255,255,0.5);">
                                ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì…ë ¥
                            </button>
                        </div>
                    </div>

                    <!-- AI ìŠ¤í† ë¦¬ ëª¨ë“œ: ì£¼ì œ ì…ë ¥ -->
                    <div id="ai-story-inputs" class="form-group">
                        <label for="topic">
                            <span class="label-icon">ğŸ’¡</span>
                            ì£¼ì œ / ì•„ì´ë””ì–´
                        </label>
                        <input type="text" id="topic" name="topic" placeholder="ì˜ˆ: ì˜¤ë˜ëœ íë³‘ì›ì—ì„œ ë°œê²¬ëœ ë¯¸ìŠ¤í„°ë¦¬í•œ ì¼ê¸°ì¥"
                            class="input" />
                        <small class="helper-text">ì£¼ì œë¥¼ ë¹„ì›Œë‘ë©´ AIê°€ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤</small>
                    </div>

                    <!-- ìŠ¤í¬ë¦½íŠ¸ ì§ì ‘ ì…ë ¥ ëª¨ë“œ -->
                    <div id="direct-script-inputs" class="form-group" style="display:none;">
                        <label for="direct-script">
                            <span class="label-icon">ğŸ“‹</span>
                            ë‚´ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
                        </label>
                        <textarea id="direct-script" rows="12"
                            placeholder="ë‚´ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¶™ì—¬ë„£ìœ¼ì„¸ìš”.&#10;&#10;ë¹ˆ ì¤„ë¡œ ì¥ë©´ì„ êµ¬ë¶„í•©ë‹ˆë‹¤.&#10;&#10;ì˜ˆì‹œ:&#10;ë§í•˜ëŠ” ì¥ì‚¬ ì†ì—ì„œ ì‚´ì•„ë‚¨ëŠ” ì¥ì‚¬.&#10;ë¹µì¼ì´ì˜ ì¥ì‚¬ì—°êµ¬ì†Œì…ë‹ˆë‹¤.&#10;&#10;ì§€ë‚œ ì˜ìƒì—ì„œ ì†Œê°œí•œ ê°€ê²Œê°€&#10;í° ë°˜ì‘ì„ ì–»ì—ˆìŠµë‹ˆë‹¤."
                            class="input" style="resize:vertical; min-height:200px; font-size:14px; line-height:1.6;"></textarea>
                        <small class="helper-text">ë¹ˆ ì¤„ë¡œ ì¥ë©´(ì”¬)ì„ êµ¬ë¶„í•©ë‹ˆë‹¤. AIê°€ ê° ì¥ë©´ì— ë§ëŠ” ì´ë¯¸ì§€ë¥¼ ìë™ ìƒì„±í•©ë‹ˆë‹¤.</small>
                    </div>

                    <!-- ì¥ë¥´ -->
                    <div class="form-group">
                        <label for="genre">
                            <span class="label-icon">ğŸ­</span>
                            ì¥ë¥´
                        </label>
                        <select id="genre" name="genre" class="select">
                            <option value="emotional">Emotional (ê°ì„±ì )</option>
                            <option value="mystery" selected>Mystery (ë¯¸ìŠ¤í„°ë¦¬)</option>
                            <option value="thriller">Thriller (ìŠ¤ë¦´ëŸ¬)</option>
                            <option value="fantasy">Fantasy (íŒíƒ€ì§€)</option>
                            <option value="horror">Horror (ê³µí¬)</option>
                            <option value="comedy">Comedy (ì½”ë¯¸ë””)</option>
                        </select>
                    </div>

                    <!-- ë¶„ìœ„ê¸° -->
                    <div class="form-group">
                        <label for="mood">
                            <span class="label-icon">ğŸ¨</span>
                            ë¶„ìœ„ê¸°
                        </label>
                        <select id="mood" name="mood" class="select">
                            <option value="dramatic" selected>Dramatic (ê·¹ì )</option>
                            <option value="melancholic">Melancholic (ìš°ìš¸)</option>
                            <option value="suspenseful">Suspenseful (ê¸´ì¥ê°)</option>
                            <option value="heartwarming">Heartwarming (ë”°ëœ»í•¨)</option>
                            <option value="dark">Dark (ì–´ë‘ì›€)</option>
                            <option value="cheerful">Cheerful (ëª…ë‘)</option>
                        </select>
                    </div>

                    <!-- ìºë¦­í„° ì¸ì¢…/ì™¸í˜• -->
                    <div class="form-group">
                        <label for="character_ethnicity">
                            <span class="label-icon">ğŸŒ</span>
                            ìºë¦­í„° ì¸ì¢…/ì™¸í˜•
                        </label>
                        <select id="character_ethnicity" name="character_ethnicity" class="select">
                            <option value="auto" selected>AI ìë™ ê²°ì •</option>
                            <option value="korean">í•œêµ­ì¸</option>
                            <option value="japanese">ì¼ë³¸ì¸</option>
                            <option value="chinese">ì¤‘êµ­ì¸</option>
                            <option value="southeast_asian">ë™ë‚¨ì•„ì‹œì•„ì¸</option>
                            <option value="european">ìœ ëŸ½/ë°±ì¸</option>
                            <option value="black">í‘ì¸</option>
                            <option value="hispanic">íˆìŠ¤íŒ¨ë‹‰/ë¼í‹´</option>
                            <option value="mixed">ë‹¤ì¸ì¢… ì¡°í•©</option>
                        </select>
                    </div>

                    <!-- ìŠ¤íƒ€ì¼ -->
                    <div class="form-group">
                        <label for="style">
                            <span class="label-icon">ğŸ–¼ï¸</span>
                            ì˜ìƒ ìŠ¤íƒ€ì¼
                        </label>
                        <select id="style" name="style" class="select">
                            <option value="cinematic, high contrast" selected>Cinematic (ì˜í™”ì )</option>
                            <option value="realistic">Realistic (ì‚¬ì‹¤ì )</option>
                            <option value="illustration">Illustration (ì¼ëŸ¬ìŠ¤íŠ¸)</option>
                            <option value="anime">Anime (ì• ë‹ˆë©”ì´ì…˜)</option>
                            <option value="webtoon">Webtoon (ì›¹íˆ°)</option>
                        </select>
                    </div>

                    <!-- ì´ë¯¸ì§€ ëª¨ë¸ -->
                    <div class="form-group">
                        <label for="image_model">
                            <span class="label-icon">ğŸ–¼ï¸</span>
                            ì´ë¯¸ì§€ ëª¨ë¸
                        </label>
                        <select id="image_model" name="image_model" class="select">
                            <option value="standard" selected>Standard (Replicate / Gemini Flash) - ë¹ ë¥´ê³  ì•ˆì •ì </option>
                            <option value="premium">Premium (Gemini 3 Pro) - ê³ í’ˆì§ˆ í”„ë¦¬ë·°</option>
                        </select>
                    </div>

                    <!-- ëª©ì†Œë¦¬ -->
                    <div class="form-group">
                        <label for="voice">
                            <span class="label-icon">ğŸ™ï¸</span>
                            ëª©ì†Œë¦¬ (TTS)
                        </label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="voice" name="voice" class="select" style="flex: 1;">
                                <option value="uyVNoMrnUku1dZyVEXwD" selected>Anna Kim (ì—¬ì„±) - ë¶€ë“œëŸ½ê³  ì°¨ë¶„í•œ ëª©ì†Œë¦¬</option>
                                <option value="8jHHF8rMqMlg8if2mOUe">Han (ë‚¨ì„±) - ëŒ€í™”ì²´, ìì—°ìŠ¤ëŸ¬ìš´ í†¤</option>
                                <option value="s07IwTCOrCDCaETjUVjx">Hyunbin (ë‚¨ì„±) - ëª…í™•í•˜ê³  ì‹ ë¢°ê° ìˆëŠ” ëª©ì†Œë¦¬</option>
                                <option value="3MTvEr8xCMCC2mL9ujrI">June (ë‚¨ì„±) - ì Šê³  í™œê¸°ì°¬ ìŠ¤í† ë¦¬í…”ë§</option>
                            </select>
                            <button type="button" id="preview-voice-btn" class="btn btn-secondary btn-small"
                                style="white-space: nowrap;">
                                ğŸ”Š ìƒ˜í”Œ ë“£ê¸°
                            </button>
                        </div>
                    </div>

                    <script>
                        document.getElementById('preview-voice-btn').addEventListener('click', async () => {
                            const voice = document.getElementById('voice').value;
                            const btn = document.getElementById('preview-voice-btn');

                            // ì¬ìƒ ì¤‘ í‘œì‹œ
                            const originalText = btn.textContent;
                            btn.textContent = 'â³ ë¡œë”©...';
                            btn.disabled = true;

                            try {
                                // [Fix] Worker ëŒ€ì‹  Railway ë°±ì—”ë“œ ì§ì ‘ í˜¸ì¶œ
                                const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
                                const baseUrl = isLocal ? '' : 'https://web-production-bb6bf.up.railway.app';
                                const targetUrl = `${baseUrl}/api/sample-voice/${voice}?t=${Date.now()}`;

                                btn.textContent = 'â³ ì—°ê²° ì¤‘...';

                                const response = await fetch(targetUrl);
                                if (!response.ok) {
                                    const errText = await response.text();
                                    throw new Error(`Worker Error (${response.status}): ${errText}`);
                                }

                                const blob = await response.blob();
                                const audioUrl = URL.createObjectURL(blob);
                                const audio = new Audio(audioUrl);

                                await audio.play();
                                btn.textContent = 'ğŸ”Š ì¬ìƒ ì¤‘...';

                                audio.onended = () => {
                                    btn.textContent = originalText;
                                    btn.disabled = false;
                                    URL.revokeObjectURL(audioUrl); // ë©”ëª¨ë¦¬ í•´ì œ
                                };
                            } catch (e) {
                                console.error(e);
                                alert('ë¯¸ë¦¬ë“£ê¸° ì‹¤íŒ¨: ' + e.message);
                                btn.textContent = originalText;
                                btn.disabled = false;
                            }
                        });
                    </script>

                    <!-- ê¸¸ì´ -->
                    <div class="form-group">
                        <label for="duration">
                            <span class="label-icon">â±ï¸</span>
                            ì˜ìƒ ê¸¸ì´: <span id="duration-display">30</span>ì´ˆ
                        </label>
                        <input type="range" id="duration" name="duration" min="30" max="300" value="30" step="10"
                            class="slider" />
                        <div class="slider-labels">
                            <span>1ë¶„</span>
                            <span>2ë¶„</span>
                            <span>3ë¶„</span>
                            <span>4ë¶„</span>
                            <span>5ë¶„</span>
                        </div>
                    </div>

                    <!-- í”Œë«í¼ -->
                    <div class="form-group">
                        <label>
                            <span class="label-icon">ğŸ“±</span>
                            ëŒ€ìƒ í”Œë«í¼
                        </label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="platform" value="youtube_long" checked>
                                <span class="radio-custom"></span>
                                YouTube ë¡±í¼ (16:9)
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="platform" value="youtube_shorts">
                                <span class="radio-custom"></span>
                                YouTube Shorts (9:16)
                            </label>
                        </div>
                    </div>

                    <!-- Feature Flags -->
                    <div class="form-group">
                        <label class="section-label">
                            <span class="label-icon">âš™ï¸</span>
                            ê³ ê¸‰ ì„¤ì •
                        </label>

                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="ffmpeg_kenburns" id="ffmpeg_kenburns" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸï¸ Ken Burns Effect
                                    <small>ì´ë¯¸ì§€ì— ì¤Œ/íŒ¬ íš¨ê³¼ ì ìš©</small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="ffmpeg_audio_ducking" id="ffmpeg_audio_ducking">
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸ”Š Audio Ducking
                                    <small>ë‚´ë ˆì´ì…˜ ì‹œ BGM ìë™ ê°ì‡ </small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="subtitle_burn_in" id="subtitle_burn_in" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸ“ ìë§‰ ìƒì„± (Subtitles)
                                    <small>ì˜ìƒì— ìë§‰ì„ ì…í™ë‹ˆë‹¤ (ê¸°ë³¸: ì¼œì§)</small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="context_carry_over" id="context_carry_over" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸ”— Context Carry-over
                                    <small>ì¥ë©´ ê°„ ë§¥ë½ ìƒì† (ì¼ê´€ì„± í–¥ìƒ)</small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="optimization_pack" id="optimization_pack">
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸš€ Optimization Pack
                                    <small>ì œëª©/ì¸ë„¤ì¼/í•´ì‹œíƒœê·¸ ìë™ ìƒì„± (ì¶”ê°€ API ë¹„ìš©)</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- ì œì¶œ ë²„íŠ¼ -->
                    <button type="submit" class="btn btn-primary" id="generate-story-btn">
                        <span class="btn-icon">ğŸ“</span>
                        ìŠ¤í† ë¦¬ ìƒì„± (1ë‹¨ê³„)
                    </button>
                </form>
            </div>

            <!-- ìŠ¤í† ë¦¬ ë¦¬ë·° ì„¹ì…˜ -->
            <div id="review-section" class="section hidden">
                <h2>ğŸ“ ìŠ¤í† ë¦¬ ê²€í†  ë° ìˆ˜ì •</h2>
                <div class="review-container">
                    <p class="section-description">
                        AIê°€ ìƒì„±í•œ ìŠ¤í† ë¦¬ë¥¼ í™•ì¸í•˜ì„¸ìš”. ëŒ€ì‚¬ë‚˜ ì§€ë¬¸ì„ ììœ ë¡­ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                        ìˆ˜ì •ì´ ëë‚˜ë©´ í•˜ë‹¨ì˜ <strong>ì˜ìƒ ìƒì„± ì‹œì‘</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.
                    </p>

                    <div class="story-meta-edit">
                        <label>ì œëª©</label>
                        <input type="text" id="review-title" class="input input-title" />
                    </div>

                    <div id="review-scene-grid" class="review-scene-grid">
                        <!-- Scene Cards (JS Generated) -->
                    </div>

                    <div class="review-actions">
                        <button id="back-to-input-btn" class="btn btn-secondary">
                            <span class="btn-icon">â¬…ï¸</span>
                            ë‹¤ì‹œ ì„¤ì •í•˜ê¸°
                        </button>
                        <button id="generate-images-btn" class="btn btn-primary btn-large">
                            <span class="btn-icon">ğŸ–¼ï¸</span>
                            ì´ë¯¸ì§€ ìƒì„± (2ë‹¨ê³„)
                        </button>
                        <button id="start-video-generation-btn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">ğŸ¬</span>
                            ë°”ë¡œ ì˜ìƒ ìƒì„± (ì´ë¯¸ì§€ í”„ë¦¬ë·° ìƒëµ)
                        </button>
                    </div>
                </div>
            </div>

            <!-- ì´ë¯¸ì§€ í”„ë¦¬ë·° ì„¹ì…˜ -->
            <div id="image-preview-section" class="section hidden">
                <h2>ğŸ–¼ï¸ ì´ë¯¸ì§€ ê²€í† </h2>
                <p class="section-description">
                    ê° ì”¬ì˜ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”. ë§ˆìŒì— ë“¤ì§€ ì•Šìœ¼ë©´ ì¬ìƒì„±í•˜ê±°ë‚˜, I2Vë¡œ ì˜ìƒ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                    í™•ì¸ì´ ëë‚˜ë©´ <strong>ì´ë¯¸ì§€ í™•ì • ë° ì˜ìƒ ìƒì„±</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.
                </p>
                <!-- ì´ë¯¸ì§€ ìƒì„± ì§„í–‰ ë°” -->
                <div id="image-progress-container" class="progress-container hidden" style="margin-bottom: 20px;">
                    <div class="progress-header">
                        <span class="progress-label" id="image-progress-label">ì´ë¯¸ì§€ ìƒì„± ì¤‘...</span>
                        <span class="progress-percentage" id="image-progress-percentage">0%</span>
                    </div>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar" id="image-progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="status-message" id="image-status-message">ì¤€ë¹„ ì¤‘...</div>
                </div>
                <div id="image-preview-grid" class="image-preview-grid"></div>
                <div id="image-test-result" style="display:none; margin: 10px 0; padding: 12px; border-radius: 8px; background: #1a1a2e; font-size: 13px; white-space: pre-wrap; max-height: 200px; overflow-y: auto;"></div>
                <div class="review-actions">
                    <button id="back-to-review-btn" class="btn btn-secondary">
                        <span class="btn-icon">â¬…ï¸</span>
                        ìŠ¤í† ë¦¬ ìˆ˜ì •í•˜ê¸°
                    </button>
                    <button id="test-image-btn" class="btn btn-secondary" onclick="app.testImageGeneration()">
                        <span class="btn-icon">ğŸ§ª</span>
                        ì´ë¯¸ì§€ ìƒì„± í…ŒìŠ¤íŠ¸
                    </button>
                    <button id="approve-images-btn" class="btn btn-primary btn-large" disabled>
                        <span class="btn-icon">ğŸ¬</span>
                        ì´ë¯¸ì§€ í™•ì • ë° ì˜ìƒ ìƒì„± (3ë‹¨ê³„)
                    </button>
                </div>
            </div>

            <!-- ì§„í–‰ìƒí™© ì„¹ì…˜ -->
            <div id="progress-section" class="section hidden">
                <h2 id="progress-title">â³ ìŠ¤í† ë¦¬ ìƒì„± ì¤‘...</h2>

                <div class="progress-container">
                    <!-- ì „ì²´ ì§„í–‰ë¥  -->
                    <div class="progress-header">
                        <span class="progress-label">ì „ì²´ ì§„í–‰ë¥ </span>
                        <span class="progress-percentage" id="progress-percentage">0%</span>
                    </div>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>

                    <!-- í˜„ì¬ ìƒíƒœ -->
                    <div class="status-message" id="status-message">
                        ì´ˆê¸°í™” ì¤‘...
                    </div>

                    <!-- ë‹¨ê³„ë³„ ì§„í–‰ìƒí™© -->
                    <div class="steps-container" id="steps-container">
                        <div class="step" data-step="story">
                            <div class="step-icon">ğŸ“</div>
                            <div class="step-content">
                                <div class="step-title">ìŠ¤í† ë¦¬ ìƒì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>

                        <div class="step" data-step="scenes">
                            <div class="step-icon">ğŸ¬</div>
                            <div class="step-content">
                                <div class="step-title">ì¥ë©´ ì²˜ë¦¬</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>

                        <div class="step" data-step="compose">
                            <div class="step-icon">ğŸï¸</div>
                            <div class="step-content">
                                <div class="step-title">ì˜ìƒ í•©ì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>

                        <div class="step" data-step="optimize">
                            <div class="step-icon">ğŸš€</div>
                            <div class="step-content">
                                <div class="step-title">ìµœì í™”</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>
                    </div>

                    <!-- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° -->
                    <div class="preview-container hidden" id="preview-container">
                        <!-- í†µí•© ìŠ¤í† ë¦¬ ë³´ë“œ -->
                        <div class="visual-preview hidden" id="visual-preview">
                            <h3>ğŸ¬ ìŠ¤í† ë¦¬ ë³´ë“œ (Story Board)</h3>
                            <div class="scene-grid" id="scene-grid">
                                <!-- ìƒì„±ëœ ì”¬ ì¹´ë“œê°€ ì—¬ê¸° ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </div>
                        </div>
                    </div>

                    <!-- ë¡œê·¸ -->
                    <div class="log-container">
                        <div class="log-header">
                            <span>ğŸ“‹ ì‹¤ì‹œê°„ ë¡œê·¸</span>
                            <button id="clear-log-btn" class="btn-small">ì§€ìš°ê¸°</button>
                        </div>
                        <div class="log-content" id="log-content"></div>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <div id="result-section" class="section hidden">
                <h2 id="result-header-text">ğŸ‰ ì˜ìƒ ìƒì„± ì™„ë£Œ!</h2>

                <div class="result-container">
                    <!-- í”„ë¡œì íŠ¸ ì •ë³´ -->
                    <div class="result-info">
                        <p><strong>í”„ë¡œì íŠ¸ ID:</strong> <code id="result-project-id"></code></p>
                        <p><strong>ì˜ìƒ ì œëª©:</strong> <span id="result-title"></span></p>
                    </div>

                    <!-- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ -->
                    <div class="video-player" id="result-video-container">
                        <video id="result-video" controls></video>
                    </div>

                    <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
                    <div class="result-actions">
                        <a id="download-btn" class="btn btn-primary" download>
                            <span class="btn-icon">ğŸ“¥</span>
                            ì˜ìƒ ë‹¤ìš´ë¡œë“œ
                        </a>
                        <button id="new-video-btn" class="btn btn-secondary">
                            <span class="btn-icon">â•</span>
                            ìƒˆ ì˜ìƒ ë§Œë“¤ê¸°
                        </button>
                    </div>

                    <!-- ì”¬ ê´€ë¦¬ ì„¹ì…˜ -->
                    <div id="scene-management" class="scene-management">
                        <h3>ğŸ¬ ì”¬ ê´€ë¦¬</h3>
                        <p class="section-description">
                            ê°œë³„ ì”¬ì„ í™•ì¸í•˜ê³  í•„ìš”ì‹œ ì¬ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            ì”¬ì„ ì¬ìƒì„±í•œ í›„ì—ëŠ” í•˜ë‹¨ì˜ "ì˜ìƒ ì¬í•©ì„±" ë²„íŠ¼ì„ ëˆŒëŸ¬ ìµœì¢… ì˜ìƒì„ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
                        </p>

                        <!-- ì”¬ ëª©ë¡ ê·¸ë¦¬ë“œ -->
                        <div id="result-scene-grid" class="result-scene-grid">
                            <!-- JSë¡œ ë™ì  ìƒì„± -->
                        </div>

                        <!-- ì¬í•©ì„± ë²„íŠ¼ -->
                        <div class="recompose-actions">
                            <button id="recompose-btn" class="btn btn-primary" style="display: none;">
                                <span class="btn-icon">ğŸ”„</span>
                                ì˜ìƒ ì¬í•©ì„± (ìˆ˜ì •ëœ ì”¬ ë°˜ì˜)
                            </button>
                        </div>
                    </div>

                    <!-- ìµœì í™” íŒ¨í‚¤ì§€ -->
                    <div id="optimization-pack" class="optimization-pack">
                        <h3>ğŸš€ YouTube ìµœì í™” íŒ¨í‚¤ì§€</h3>

                        <!-- ì œëª© í›„ë³´ -->
                        <div class="opt-section">
                            <h4>ğŸ“Œ ì œëª© í›„ë³´</h4>
                            <div id="title-candidates" class="candidate-list"></div>
                        </div>

                        <!-- ì¸ë„¤ì¼ ë¬¸êµ¬ -->
                        <div class="opt-section">
                            <h4>ğŸ–¼ï¸ ì¸ë„¤ì¼ ë¬¸êµ¬</h4>
                            <div id="thumbnail-texts" class="candidate-list"></div>
                        </div>

                        <!-- í•´ì‹œíƒœê·¸ -->
                        <div class="opt-section">
                            <h4>#ï¸âƒ£ í•´ì‹œíƒœê·¸</h4>
                            <div id="hashtags" class="hashtag-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë®¤ì§ë¹„ë””ì˜¤ ì„¹ì…˜ -->
            <div id="mv-section" class="section hidden">
                <h2>ğŸµ ë®¤ì§ë¹„ë””ì˜¤ ë§Œë“¤ê¸°</h2>
                <p class="section-description" style="color: #ccc; margin-bottom: 20px;">
                    Suno, Udio ë“±ì—ì„œ ë§Œë“  ìŒì•…ì„ ì—…ë¡œë“œí•˜ê³  AIê°€ ìë™ìœ¼ë¡œ ë®¤ì§ë¹„ë””ì˜¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
                </p>

                <form id="mv-form" class="form">
                    <!-- ìŒì•… íŒŒì¼ ì—…ë¡œë“œ -->
                    <div class="form-group">
                        <label for="mv-music-file">
                            <span class="label-icon">ğŸµ</span>
                            ìŒì•… íŒŒì¼ ì—…ë¡œë“œ
                        </label>
                        <input type="file" id="mv-music-file" name="music_file"
                            accept=".mp3,.wav,.m4a,.ogg,.flac" class="input" required />
                        <small class="helper-text">MP3, WAV, M4A, OGG, FLAC (ìµœëŒ€ 10ë¶„)</small>
                    </div>

                    <!-- ê°€ì‚¬ (ì„ íƒ) -->
                    <div class="form-group">
                        <label for="mv-lyrics">
                            <span class="label-icon">ğŸ“</span>
                            ê°€ì‚¬ (ì„ íƒ)
                        </label>
                        <textarea id="mv-lyrics" name="lyrics" class="input" rows="6"
                            placeholder="ê°€ì‚¬ë¥¼ ì…ë ¥í•˜ë©´ ë” ì •í™•í•œ ì”¬ ë¶„í• ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤..."></textarea>
                        <small class="helper-text">ê°€ì‚¬ë¥¼ ì…ë ¥í•˜ë©´ ì¥ë©´ì— ê°€ì‚¬ê°€ ì—°ë™ë©ë‹ˆë‹¤</small>
                    </div>

                    <!-- ë¹„ì£¼ì–¼ ì»¨ì…‰ -->
                    <div class="form-group">
                        <label for="mv-concept">
                            <span class="label-icon">ğŸ¨</span>
                            ë¹„ì£¼ì–¼ ì»¨ì…‰ (ì„ íƒ)
                        </label>
                        <input type="text" id="mv-concept" name="concept" class="input"
                            placeholder="ì˜ˆ: ë‹¬ë¹› ì•„ë˜ ì¶¤ì¶”ëŠ” ìš”ì •ë“¤, ë¯¸ë˜ ë„ì‹œì˜ ë„¤ì˜¨ ê±°ë¦¬..." />
                        <small class="helper-text">ì›í•˜ëŠ” ë¹„ì£¼ì–¼ ì»¨ì…‰ì„ ììœ ë¡­ê²Œ ì„¤ëª…í•˜ì„¸ìš”</small>
                    </div>

                    <!-- ìºë¦­í„° êµ¬ì„± -->
                    <div class="form-group">
                        <label for="mv-character-setup">
                            <span class="label-icon">ğŸ‘¥</span>
                            ìºë¦­í„° êµ¬ì„±
                        </label>
                        <select id="mv-character-setup" name="character_setup" class="select">
                            <option value="auto" selected>AI ìë™ ê²°ì •</option>
                            <option value="male_female">ë‚¨ë…€ ì»¤í”Œ</option>
                            <option value="female_female">ì—¬ì—¬ ì»¤í”Œ</option>
                            <option value="male_male">ë‚¨ë‚¨ ì»¤í”Œ</option>
                            <option value="solo_male">ì†”ë¡œ ë‚¨ì„±</option>
                            <option value="solo_female">ì†”ë¡œ ì—¬ì„±</option>
                            <option value="group">ê·¸ë£¹ (3ì¸ ì´ìƒ)</option>
                        </select>
                    </div>

                    <!-- ìºë¦­í„° ì¸ì¢…/ì™¸í˜• -->
                    <div class="form-group">
                        <label for="mv-character-ethnicity">
                            <span class="label-icon">ğŸŒ</span>
                            ìºë¦­í„° ì¸ì¢…/ì™¸í˜•
                        </label>
                        <select id="mv-character-ethnicity" name="character_ethnicity" class="select">
                            <option value="auto" selected>AI ìë™ ê²°ì •</option>
                            <option value="korean">í•œêµ­ì¸</option>
                            <option value="japanese">ì¼ë³¸ì¸</option>
                            <option value="chinese">ì¤‘êµ­ì¸</option>
                            <option value="southeast_asian">ë™ë‚¨ì•„ì‹œì•„ì¸</option>
                            <option value="european">ìœ ëŸ½/ë°±ì¸</option>
                            <option value="black">í‘ì¸</option>
                            <option value="hispanic">íˆìŠ¤íŒ¨ë‹‰/ë¼í‹´</option>
                            <option value="mixed">ë‹¤ì¸ì¢… ì¡°í•©</option>
                        </select>
                    </div>

                    <!-- ì¥ë¥´ -->
                    <div class="form-group">
                        <label for="mv-genre">
                            <span class="label-icon">ğŸ­</span>
                            ì¥ë¥´
                        </label>
                        <select id="mv-genre" name="genre" class="select">
                            <option value="fantasy" selected>Fantasy (íŒíƒ€ì§€)</option>
                            <option value="romance">Romance (ë¡œë§¨ìŠ¤)</option>
                            <option value="action">Action (ì•¡ì…˜)</option>
                            <option value="horror">Horror (ê³µí¬)</option>
                            <option value="scifi">Sci-Fi (SF)</option>
                            <option value="drama">Drama (ë“œë¼ë§ˆ)</option>
                            <option value="comedy">Comedy (ì½”ë¯¸ë””)</option>
                            <option value="abstract">Abstract (ì¶”ìƒ)</option>
                        </select>
                    </div>

                    <!-- ë¶„ìœ„ê¸° -->
                    <div class="form-group">
                        <label for="mv-mood">
                            <span class="label-icon">âœ¨</span>
                            ë¶„ìœ„ê¸°
                        </label>
                        <select id="mv-mood" name="mood" class="select">
                            <option value="epic" selected>Epic (ì›…ì¥)</option>
                            <option value="dreamy">Dreamy (ëª½í™˜)</option>
                            <option value="energetic">Energetic (ì—­ë™)</option>
                            <option value="calm">Calm (í‰ì˜¨)</option>
                            <option value="dark">Dark (ì–´ë‘ì›€)</option>
                            <option value="romantic">Romantic (ë¡œë§¨í‹±)</option>
                            <option value="melancholic">Melancholic (ìš°ìš¸)</option>
                            <option value="uplifting">Uplifting (ê³ ì–‘)</option>
                        </select>
                    </div>

                    <!-- ìŠ¤íƒ€ì¼ -->
                    <div class="form-group">
                        <label for="mv-style">
                            <span class="label-icon">ğŸ–¼ï¸</span>
                            ë¹„ì£¼ì–¼ ìŠ¤íƒ€ì¼
                        </label>
                        <select id="mv-style" name="style" class="select">
                            <option value="cinematic" selected>Cinematic (ì˜í™”ì )</option>
                            <option value="anime">Anime (ì• ë‹ˆë©”ì´ì…˜)</option>
                            <option value="webtoon">Webtoon (ì›¹íˆ°)</option>
                            <option value="realistic">Realistic (ì‚¬ì‹¤ì )</option>
                            <option value="illustration">Illustration (ì¼ëŸ¬ìŠ¤íŠ¸)</option>
                            <option value="abstract">Abstract (ì¶”ìƒ)</option>
                            <option value="hoyoverse">HoYoverse (ê²Œì„ ì• ë‹ˆë©”)</option>
                        </select>
                    </div>

                    <!-- ìë§‰ ì˜µì…˜ -->
                    <div class="form-group" style="margin-top: 10px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="mv-subtitle-enabled" checked
                                   style="width: 18px; height: 18px; accent-color: #00adb5; cursor: pointer;">
                            <span style="font-size: 0.95rem;">
                                ğŸ“ ê°€ì‚¬ ìë§‰
                                <small style="color: #999; display: block; font-size: 0.8rem;">ì˜ìƒì— ê°€ì‚¬ ìë§‰ì„ ì…í™ë‹ˆë‹¤</small>
                            </span>
                        </label>
                    </div>

                    <!-- í…ŒìŠ¤íŠ¸ ì˜µì…˜ -->
                    <div class="form-group" style="margin-top: 5px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="mv-quick-test"
                                   style="width: 18px; height: 18px; accent-color: #00adb5; cursor: pointer;">
                            <span style="font-size: 0.95rem;">
                                âš¡ í€µ í…ŒìŠ¤íŠ¸ (5ì»·)
                                <small style="color: #999; display: block; font-size: 0.8rem;">ìŠ¤íƒ€ì¼ í™•ì¸ìš© - 5ì»·ë§Œ ë¹ ë¥´ê²Œ ìƒì„±</small>
                            </span>
                        </label>
                    </div>
                    <div class="form-group" style="margin-top: 5px;">
                        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                            <input type="checkbox" id="mv-subtitle-only"
                                   style="width: 18px; height: 18px; accent-color: #00adb5; cursor: pointer;">
                            <span style="font-size: 0.95rem;">
                                ğŸ“ ìë§‰ë§Œ í…ŒìŠ¤íŠ¸
                                <small style="color: #999; display: block; font-size: 0.8rem;">ì´ë¯¸ì§€ ì—†ì´ ìë§‰ ì‹±í¬ë§Œ í™•ì¸ (ê²€ì€ ë°°ê²½)</small>
                            </span>
                        </label>
                    </div>

                    <!-- ì—…ë¡œë“œ ë²„íŠ¼ -->
                    <button type="submit" class="btn btn-primary" id="mv-upload-btn">
                        <span class="btn-icon">ğŸ¬</span>
                        ë®¤ì§ë¹„ë””ì˜¤ ìƒì„±
                    </button>
                </form>
            </div>

            <!-- ë®¤ì§ë¹„ë””ì˜¤ ë¶„ì„ ê²°ê³¼ ì„¹ì…˜ -->
            <div id="mv-analysis-section" class="section hidden">
                <h2>ğŸ¼ ìŒì•… ë¶„ì„ ê²°ê³¼</h2>
                <div class="mv-analysis-info" style="background: #1a1a2e; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px;">
                        <div class="mv-info-card">
                            <span style="color: #00adb5; font-size: 0.9rem;">ê¸¸ì´</span>
                            <p id="mv-duration" style="font-size: 1.5rem; font-weight: bold;">0:00</p>
                        </div>
                        <div class="mv-info-card">
                            <span style="color: #00adb5; font-size: 0.9rem;">BPM</span>
                            <p id="mv-bpm" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="mv-info-card">
                            <span style="color: #00adb5; font-size: 0.9rem;">ì¶”ì²œ ì”¬ ìˆ˜</span>
                            <p id="mv-suggested-scenes" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                        <div class="mv-info-card">
                            <span style="color: #00adb5; font-size: 0.9rem;">ë¶„ìœ„ê¸°</span>
                            <p id="mv-detected-mood" style="font-size: 1.5rem; font-weight: bold;">-</p>
                        </div>
                    </div>
                </div>

                <!-- ì”¬ ë¶„í•  í¸ì§‘ -->
                <h3 style="color: #00adb5; margin-bottom: 15px;">ğŸ“ ì”¬ ë¶„í•  í¸ì§‘</h3>
                <p class="section-description" style="color: #ccc; margin-bottom: 15px;">
                    ìë™ ë¶„í• ëœ ì”¬ì„ í™•ì¸í•˜ê³  í•„ìš”ì‹œ ìˆ˜ì •í•˜ì„¸ìš”. ê° ì”¬ì— ëŒ€í•œ ì„¤ëª…ì„ ì¶”ê°€í•˜ë©´ ë” ì •í™•í•œ ì˜ìƒì´ ìƒì„±ë©ë‹ˆë‹¤.
                </p>
                <div id="mv-scene-editor" style="display: flex; flex-direction: column; gap: 15px;">
                    <!-- JSë¡œ ì”¬ ì¹´ë“œ ë™ì  ìƒì„± -->
                </div>

                <div style="display: flex; flex-direction: column; align-items: center; gap: 12px; margin-top: 30px;">
                    <div style="display: flex; justify-content: center; gap: 15px;">
                        <button id="mv-back-btn" class="btn btn-secondary">
                            <span class="btn-icon">â¬…ï¸</span>
                            ë‹¤ì‹œ ì—…ë¡œë“œ
                        </button>
                        <button id="mv-subtitle-test-btn" class="btn" style="font-size: 1rem; padding: 12px 24px; background: #444; color: #fff; border: 1px solid #666;">
                            <span class="btn-icon">ğŸ“</span> ìë§‰ í…ŒìŠ¤íŠ¸
                        </button>
                        <button id="mv-generate-btn" class="btn btn-primary btn-large">
                            <span class="btn-icon">ğŸ¬</span>
                            ë®¤ì§ë¹„ë””ì˜¤ ìƒì„± ì‹œì‘
                        </button>
                    </div>
                </div>
            </div>

            <!-- ë®¤ì§ë¹„ë””ì˜¤ ìƒì„± ì§„í–‰ ì„¹ì…˜ -->
            <div id="mv-progress-section" class="section hidden">
                <h2 id="mv-progress-title">â³ ë®¤ì§ë¹„ë””ì˜¤ ìƒì„± ì¤‘...</h2>

                <div class="progress-container">
                    <div class="progress-header">
                        <span class="progress-label">ì „ì²´ ì§„í–‰ë¥ </span>
                        <span class="progress-percentage" id="mv-progress-percentage">0%</span>
                    </div>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar" id="mv-progress-bar"></div>
                    </div>
                    <div class="status-message" id="mv-status-message">ì´ˆê¸°í™” ì¤‘...</div>
                    <button id="mv-cancel-btn" class="btn btn-danger" style="margin-top: 10px; background: #e74c3c; color: #fff; border: none; padding: 8px 20px; border-radius: 6px; cursor: pointer; font-size: 14px;">ìƒì„± ì¤‘ë‹¨</button>

                    <!-- ë‹¨ê³„ í‘œì‹œ -->
                    <div class="steps-container" id="mv-steps-container">
                        <div class="step" data-step="analyze">
                            <div class="step-icon">ğŸµ</div>
                            <div class="step-content">
                                <div class="step-title">ìŒì•… ë¶„ì„</div>
                                <div class="step-status">ì™„ë£Œ</div>
                            </div>
                        </div>
                        <div class="step" data-step="scenes">
                            <div class="step-icon">ğŸ“</div>
                            <div class="step-content">
                                <div class="step-title">ì”¬ í”„ë¡¬í”„íŠ¸ ìƒì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>
                        <div class="step" data-step="images">
                            <div class="step-icon">ğŸ–¼ï¸</div>
                            <div class="step-content">
                                <div class="step-title">ì´ë¯¸ì§€ ìƒì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>
                        <div class="step" data-step="compose">
                            <div class="step-icon">ğŸ¬</div>
                            <div class="step-content">
                                <div class="step-title">ì˜ìƒ í•©ì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>
                    </div>

                    <!-- ì”¬ ë¯¸ë¦¬ë³´ê¸° ê·¸ë¦¬ë“œ -->
                    <div id="mv-scene-preview" style="margin-top: 20px;">
                        <h3 style="color: #00adb5; margin-bottom: 15px;">ğŸ¨ ìƒì„±ëœ ì”¬</h3>
                        <div id="mv-scene-grid" class="scene-grid">
                            <!-- JSë¡œ ë™ì  ìƒì„± -->
                        </div>
                    </div>

                    <!-- ë¡œê·¸ -->
                    <div class="log-container" style="margin-top: 20px;">
                        <div class="log-header">
                            <span>ğŸ“‹ ì‹¤ì‹œê°„ ë¡œê·¸</span>
                            <button id="mv-clear-log-btn" class="btn-small">ì§€ìš°ê¸°</button>
                        </div>
                        <div class="log-content" id="mv-log-content"></div>
                    </div>
                </div>
            </div>

            <!-- ë®¤ì§ë¹„ë””ì˜¤ ì´ë¯¸ì§€ ë¦¬ë·° ì„¹ì…˜ -->
            <div id="mv-image-review-section" class="section hidden">
                <h2>ğŸ¨ ì”¬ ì´ë¯¸ì§€ í™•ì¸</h2>
                <p style="color: #999; margin-bottom: 1.5rem;">
                    ì”¬ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•˜ê³ , ë§ˆìŒì— ì•ˆ ë“œëŠ” ì”¬ì€ ì¬ìƒì„±í•˜ì„¸ìš”. I2Vë¡œ ì˜ìƒ í´ë¦½ì„ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
                </p>
                <div id="mv-image-review-grid" class="result-scene-grid"></div>
                <div style="margin-top: 1.5rem; text-align: center; display: flex; gap: 12px; justify-content: center; flex-wrap: wrap;">
                    <button id="mv-lyrics-timeline-btn" class="btn btn-secondary"
                            onclick="app.openLyricsTimeline()">
                        <span class="btn-icon">ğŸ¤</span>
                        ê°€ì‚¬ íƒ€ì´ë° í¸ì§‘
                    </button>
                    <button id="mv-compose-btn" class="btn btn-primary" style="font-size: 1.1rem; padding: 14px 32px;">
                        <span class="btn-icon">ğŸ¬</span> ìµœì¢… ë®¤ì§ë¹„ë””ì˜¤ ìƒì„±
                    </button>
                </div>

                <!-- ê°€ì‚¬ íƒ€ì´ë° ì—ë””í„° ëª¨ë‹¬ -->
                <div id="lyrics-timeline-overlay" class="lyrics-timeline-overlay">
                    <div class="lyrics-timeline-modal">
                        <div class="lyrics-timeline-header">
                            <h3>ê°€ì‚¬ íƒ€ì´ë° í¸ì§‘ê¸°</h3>
                            <button class="lyrics-timeline-close" onclick="app.closeLyricsTimeline()">&times;</button>
                        </div>
                        <div class="lyrics-timeline-body">
                            <table class="lyrics-timeline-table">
                                <thead>
                                    <tr>
                                        <th class="col-time">ì‹œê°„</th>
                                        <th class="col-stt">STT ì¸ì‹</th>
                                        <th class="col-lyrics">ìë§‰ í…ìŠ¤íŠ¸</th>
                                        <th class="col-del"></th>
                                    </tr>
                                </thead>
                                <tbody id="lyrics-timeline-tbody">
                                    <!-- JSë¡œ ë™ì  ìƒì„± -->
                                </tbody>
                            </table>
                        </div>
                        <div class="lyrics-timeline-footer">
                            <div class="footer-left">
                                <button class="btn-tl-add" onclick="app.timelineAddRow()">+ ì¤„ ì¶”ê°€</button>
                            </div>
                            <div class="footer-right">
                                <button class="btn-tl-reset" onclick="app.timelineReset()">ì´ˆê¸°í™”</button>
                                <button id="btn-tl-save" class="btn-tl-save" onclick="app.timelineSave()">ì €ì¥</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ë®¤ì§ë¹„ë””ì˜¤ ê²°ê³¼ ì„¹ì…˜ -->
            <div id="mv-result-section" class="section hidden">
                <h2 id="mv-result-header">ğŸ‰ ë®¤ì§ë¹„ë””ì˜¤ ì™„ì„±!</h2>

                <div class="result-container">
                    <div class="result-info">
                        <p><strong>í”„ë¡œì íŠ¸ ID:</strong> <code id="mv-result-project-id"></code></p>
                        <p><strong>ê¸¸ì´:</strong> <span id="mv-result-duration"></span></p>
                        <p><strong>ì”¬ ìˆ˜:</strong> <span id="mv-result-scene-count"></span></p>
                    </div>

                    <div class="video-player" id="mv-result-video-container">
                        <video id="mv-result-video" controls style="width: 100%; border-radius: 8px;"></video>
                    </div>

                    <div class="result-actions">
                        <a id="mv-download-btn" class="btn btn-primary" download>
                            <span class="btn-icon">ğŸ“¥</span>
                            ë®¤ì§ë¹„ë””ì˜¤ ë‹¤ìš´ë¡œë“œ
                        </a>
                        <label id="mv-music-upload-btn" class="btn btn-secondary" style="display:none;">
                            <span class="btn-icon">ğŸµ</span>
                            ìŒì•… íŒŒì¼ ì¬ì—…ë¡œë“œ
                            <input type="file" accept=".mp3,.wav,.m4a,.ogg,.flac" style="display:none;"
                                   onchange="app.mvUploadMusicForRecompose(this.files[0])">
                        </label>
                        <button id="mv-recompose-btn" class="btn btn-secondary" style="display:none;"
                                onclick="app.mvRecompose()">
                            <span class="btn-icon">ğŸ”„</span>
                            ì˜ìƒ ì¬í•©ì„± (ìˆ˜ì • ë°˜ì˜)
                        </button>
                        <button id="mv-new-btn" class="btn btn-secondary">
                            <span class="btn-icon">â•</span>
                            ìƒˆ ë®¤ì§ë¹„ë””ì˜¤ ë§Œë“¤ê¸°
                        </button>
                    </div>

                    <!-- ì”¬ ì¸ë„¤ì¼ ê·¸ë¦¬ë“œ -->
                    <div style="margin-top: 30px;">
                        <h3 style="color: #00adb5; margin-bottom: 15px;">ğŸ¨ ìƒì„±ëœ ì”¬</h3>
                        <div id="mv-result-scene-grid" class="scene-grid">
                            <!-- JSë¡œ ë™ì  ìƒì„± -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- History ì„¹ì…˜ (ë‚´ ë¹„ë””ì˜¤) -->
            <div id="history-section" class="section hidden">
                <h2>ğŸ“º ë‚´ ë¹„ë””ì˜¤ ë³´ê´€í•¨</h2>
                <div class="history-container">
                    <div class="retention-notice">
                        ğŸ“‹ ë³´ê´€ ì •ì±…: ì´ë¯¸ì§€ëŠ” ë‹¤ìŒ ë‚  ìƒˆë²½ 3ì‹œì— ìë™ ì‚­ì œë©ë‹ˆë‹¤.
                        ìµœì¢… ì˜ìƒì€ 3ì¼ í›„ ì‚­ì œë©ë‹ˆë‹¤. í•„ìš”í•œ ì˜ìƒì€ ë¯¸ë¦¬ ë‹¤ìš´ë¡œë“œí•´ ì£¼ì„¸ìš”.
                    </div>
                    <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                        <div class="history-filter-tabs">
                            <button class="history-filter-btn active" data-filter="all">ì „ì²´</button>
                            <button class="history-filter-btn" data-filter="video">ğŸ“½ï¸ ì˜ìƒ</button>
                            <button class="history-filter-btn" data-filter="mv">ğŸµ MV</button>
                        </div>
                        <button id="refresh-history-btn" class="btn btn-secondary btn-small">
                            ğŸ”„ ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                    <div id="history-grid" class="history-grid">
                        <!-- JSë¡œ ì¹´ë“œ ë¡œë“œ -->
                    </div>
                </div>
            </div>

        </main>

        <!-- í‘¸í„° -->
        <footer class="footer">
            <p>&copy; 2024 STORYCUT v2.0 | AI-Powered Story Video Generator</p>
            <p>
                <a href="https://github.com/yourusername/storycut" target="_blank">GitHub</a> |
                <a href="/docs" target="_blank">API ë¬¸ì„œ</a>
            </p>
        </footer>
    </div>

    <script src="/static/app.js?v=20260214_0003"></script>
</body>

</html>