<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STORYCUT v2.0 - AI ìŠ¤í† ë¦¬ ì˜ìƒ ìƒì„±ê¸°</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        body {
            background-color: #121212;
            color: #e0e0e0;
            font-family: 'Noto Sans KR', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            box-sizing: border-box;
            background-color: #1e1e1e;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #333;
        }

        .input-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* Nav & History Styles */
        .nav-links {
            margin-top: 15px;
            display: flex;
            gap: 20px;
            justify-content: center;
        }

        .nav-link {
            text-decoration: none;
            color: #aaa;
            font-weight: bold;
            font-size: 1rem;
            transition: color 0.2s;
            padding-bottom: 5px;
            border-bottom: 2px solid transparent;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #00adb5;
            border-bottom-color: #00adb5;
        }

        .history-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
        }

        .history-card {
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 8px;
            overflow: hidden;
            transition: transform 0.2s;
        }

        .history-card:hover {
            transform: translateY(-5px);
            border-color: #00adb5;
        }

        .history-thumb {
            width: 100%;
            height: 160px;
            background: #1a1a2e;
            object-fit: cover;
            display: block;
        }

        .history-info {
            padding: 15px;
        }

        .history-title {
            color: #fff;
            font-weight: bold;
            font-size: 1.1rem;
            margin: 0 0 10px 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .history-date {
            color: #888;
            font-size: 0.8rem;
            margin-bottom: 10px;
        }

        .history-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            background: #393e46;
            color: #ccc;
        }

        .history-status.completed {
            background: #00adb5;
            color: #fff;
        }

        /* Additional styles for review and progress */
        .preview-container {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #252a34;
            border-radius: 12px;
            border: 1px solid #393e46;
        }

        .story-preview h3,
        .visual-preview h3 {
            margin-top: 0;
            margin-bottom: 1rem;
            color: #00adb5;
            font-size: 1.2rem;
        }

        .script-content {
            background: #1a1a2e;
            padding: 1rem;
            border-radius: 8px;
            max-height: 200px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            color: #eeeeee;
            line-height: 1.5;
        }

        .scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        .scene-card {
            background: #1a1a2e;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #393e46;
            transition: transform 0.2s;
        }

        .scene-card:hover {
            transform: scale(1.05);
        }

        .scene-card img {
            width: 100%;
            height: 85px;
            object-fit: cover;
            display: block;
        }

        .scene-card .scene-info {
            padding: 8px;
            font-size: 0.8em;
            color: #ccc;
        }

        .scene-card .scene-narration {
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
            display: block;
        }

        .scene-card .scene-visual {
            font-size: 0.75em;
            color: #888;
            font-style: italic;
            display: block;
        }

        .scene-placeholder {
            width: 100%;
            height: 100px;
            background: #252a34;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #555;
            font-size: 0.8rem;
        }

        /* Review Card Styles */
        .review-scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .review-card {
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 8px;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .review-card-header {
            display: flex;
            justify-content: space-between;
            color: #00adb5;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .review-card label {
            font-size: 0.85rem;
            color: #ccc;
            margin-bottom: 2px;
            display: block;
        }

        .review-textarea {
            width: 100%;
            background: #393e46;
            border: 1px solid #222831;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 0.9rem;
            resize: vertical;
            min-height: 60px;
            box-sizing: border-box;
        }

        .visual-textarea {
            font-size: 0.85rem;
            color: #ddd;
            font-style: italic;
        }

        .review-actions {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 20px;
            border-top: 1px solid #393e46;
            padding-top: 20px;
        }

        /* ì”¬ ê´€ë¦¬ ìŠ¤íƒ€ì¼ */
        .scene-management {
            margin-top: 2rem;
            padding: 1.5rem;
            background: #252a34;
            border-radius: 12px;
            border: 1px solid #393e46;
        }

        .scene-management h3 {
            color: #00adb5;
            margin-top: 0;
            margin-bottom: 1rem;
        }

        .scene-management .section-description {
            color: #ccc;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .result-scene-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 1.5rem;
        }

        .result-scene-card {
            background: #1a1a2e;
            border: 1px solid #393e46;
            border-radius: 8px;
            padding: 15px;
            transition: border-color 0.2s;
        }

        .result-scene-card:hover {
            border-color: #00adb5;
        }

        .result-scene-card.regenerating {
            border-color: #f39c12;
            opacity: 0.7;
        }

        .result-scene-card.failed {
            border-color: #e74c3c;
        }

        .scene-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #393e46;
        }

        .scene-card-title {
            color: #00adb5;
            font-weight: bold;
            font-size: 1rem;
        }

        .scene-status-badge {
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .scene-status-badge.completed {
            background: #27ae60;
            color: #fff;
        }

        .scene-status-badge.failed {
            background: #e74c3c;
            color: #fff;
        }

        .scene-status-badge.regenerating {
            background: #f39c12;
            color: #fff;
        }

        .scene-card-narration {
            color: #ddd;
            font-size: 0.85rem;
            margin: 10px 0;
            line-height: 1.4;
            max-height: 60px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .scene-card-visual {
            color: #888;
            font-size: 0.75rem;
            font-style: italic;
            margin-bottom: 10px;
            max-height: 40px;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .scene-card-actions {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .btn-regenerate {
            flex: 1;
            background: #393e46;
            color: #fff;
            border: 1px solid #555;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .btn-regenerate:hover {
            background: #00adb5;
            border-color: #00adb5;
        }

        .btn-regenerate:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .recompose-actions {
            display: flex;
            justify-content: center;
            padding-top: 1rem;
            border-top: 1px solid #393e46;
        }

        .scene-error-message {
            color: #e74c3c;
            font-size: 0.75rem;
            margin-top: 5px;
            background: rgba(231, 76, 60, 0.1);
            padding: 5px 8px;
            border-radius: 4px;
        }
    

        /* ì´ë¯¸ì§€ í”„ë¦¬ë·° ê·¸ë¦¬ë“œ ìŠ¤íƒ€ì¼ */
        .image-preview-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .image-card {
            background: #222831;
            border: 1px solid #393e46;
            border-radius: 8px;
            overflow: hidden;
            transition: border-color 0.2s, transform 0.2s;
        }

        .image-card:hover {
            border-color: #00adb5;
        }

        .image-card.hook-video {
            border-color: #8b5cf6;
            border-width: 2px;
        }

        .image-card-header {
            display: flex;
            justify-content: space-between;
            padding: 10px 15px;
            background: #1a1a2e;
            border-bottom: 1px solid #393e46;
        }

        .image-card-title {
            color: #00adb5;
            font-weight: bold;
        }

        .hook-badge {
            background: #8b5cf6;
            color: white;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .image-card img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            background: #1a1a2e;
        }

        .image-card-body {
            padding: 15px;
        }

        .image-narration {
            color: #ddd;
            font-size: 0.9rem;
            margin-bottom: 10px;
            max-height: 60px;
            overflow: hidden;
        }

        .image-actions {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .btn-image-action {
            padding: 8px 10px;
            background: #393e46;
            color: #fff;
            border: 1px solid #555;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
            text-align: center;
        }

        .btn-image-action:hover {
            background: #00adb5;
            border-color: #00adb5;
        }

        .btn-image-action:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .btn-i2v {
            background: #f39c12;
            border-color: #f39c12;
        }

        .btn-i2v:hover {
            background: #e67e22;
            border-color: #e67e22;
        }

        .btn-hook {
            background: #8b5cf6;
            border-color: #8b5cf6;
        }

        .btn-hook:hover {
            background: #7c3aed;
            border-color: #7c3aed;
        }

        .btn-hook.active {
            background: #6d28d9;
            box-shadow: 0 0 8px #8b5cf6;
        }
    </style>
    <script src="/static/auth.js"></script>
</head>

<body>
    <div class="container">
        <!-- í—¤ë” -->
        <header class="header">
            <h1>Storycut <span
                    style="font-size: 0.5em; background: #8b5cf6; padding: 2px 6px; border-radius: 4px; vertical-align: middle;">v2.7.0</span>
            </h1>
            <p class="tagline">ì´ì•¼ê¸°ë¥¼ ì…ë ¥í•˜ë©´, ì¡°íšŒìˆ˜ í„°ì§€ëŠ” ìœ íŠœë¸Œ ì˜ìƒì´ ì™„ì„±ë©ë‹ˆë‹¤</p>
            <nav class="nav-links">
                <a href="#" id="nav-create" class="nav-link active">ìƒˆ ì˜ìƒ ë§Œë“¤ê¸°</a>
                <a href="#" id="nav-history" class="nav-link">ë‚´ ë¹„ë””ì˜¤ (History)</a>
            </nav>
        </header>

        <!-- ë©”ì¸ ì»¨í…ì¸  -->
        <main class="main-content">
            <!-- ì…ë ¥ í¼ -->
            <div id="input-section" class="section">
                <h2>ğŸ¬ ìƒˆ ì˜ìƒ ë§Œë“¤ê¸°</h2>

                <form id="generate-form" class="form">
                    <!-- ì£¼ì œ -->
                    <div class="form-group">
                        <label for="topic">
                            <span class="label-icon">ğŸ’¡</span>
                            ì£¼ì œ / ì•„ì´ë””ì–´
                        </label>
                        <input type="text" id="topic" name="topic" placeholder="ì˜ˆ: ì˜¤ë˜ëœ íë³‘ì›ì—ì„œ ë°œê²¬ëœ ë¯¸ìŠ¤í„°ë¦¬í•œ ì¼ê¸°ì¥"
                            class="input" />
                        <small class="helper-text">ì£¼ì œë¥¼ ë¹„ì›Œë‘ë©´ AIê°€ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤</small>
                    </div>

                    <!-- ì¥ë¥´ -->
                    <div class="form-group">
                        <label for="genre">
                            <span class="label-icon">ğŸ­</span>
                            ì¥ë¥´
                        </label>
                        <select id="genre" name="genre" class="select">
                            <option value="emotional">Emotional (ê°ì„±ì )</option>
                            <option value="mystery" selected>Mystery (ë¯¸ìŠ¤í„°ë¦¬)</option>
                            <option value="thriller">Thriller (ìŠ¤ë¦´ëŸ¬)</option>
                            <option value="fantasy">Fantasy (íŒíƒ€ì§€)</option>
                            <option value="horror">Horror (ê³µí¬)</option>
                            <option value="comedy">Comedy (ì½”ë¯¸ë””)</option>
                        </select>
                    </div>

                    <!-- ë¶„ìœ„ê¸° -->
                    <div class="form-group">
                        <label for="mood">
                            <span class="label-icon">ğŸ¨</span>
                            ë¶„ìœ„ê¸°
                        </label>
                        <select id="mood" name="mood" class="select">
                            <option value="dramatic" selected>Dramatic (ê·¹ì )</option>
                            <option value="melancholic">Melancholic (ìš°ìš¸)</option>
                            <option value="suspenseful">Suspenseful (ê¸´ì¥ê°)</option>
                            <option value="heartwarming">Heartwarming (ë”°ëœ»í•¨)</option>
                            <option value="dark">Dark (ì–´ë‘ì›€)</option>
                            <option value="cheerful">Cheerful (ëª…ë‘)</option>
                        </select>
                    </div>

                    <!-- ìŠ¤íƒ€ì¼ -->
                    <div class="form-group">
                        <label for="style">
                            <span class="label-icon">ğŸ–¼ï¸</span>
                            ì˜ìƒ ìŠ¤íƒ€ì¼
                        </label>
                        <select id="style" name="style" class="select">
                            <option value="cinematic, high contrast" selected>Cinematic (ì˜í™”ì )</option>
                            <option value="realistic">Realistic (ì‚¬ì‹¤ì )</option>
                            <option value="illustration">Illustration (ì¼ëŸ¬ìŠ¤íŠ¸)</option>
                            <option value="anime">Anime (ì• ë‹ˆë©”ì´ì…˜)</option>
                            <option value="webtoon">Webtoon (ì›¹íˆ°)</option>
                        </select>
                    </div>

                    <!-- ì´ë¯¸ì§€ ëª¨ë¸ -->
                    <div class="form-group">
                        <label for="image_model">
                            <span class="label-icon">ğŸ–¼ï¸</span>
                            ì´ë¯¸ì§€ ëª¨ë¸
                        </label>
                        <select id="image_model" name="image_model" class="select">
                            <option value="standard" selected>Standard (Replicate / Gemini Flash) - ë¹ ë¥´ê³  ì•ˆì •ì </option>
                            <option value="premium">Premium (Gemini 3 Pro) - ê³ í’ˆì§ˆ í”„ë¦¬ë·°</option>
                        </select>
                    </div>

                    <!-- ëª©ì†Œë¦¬ -->
                    <div class="form-group">
                        <label for="voice">
                            <span class="label-icon">ğŸ™ï¸</span>
                            ëª©ì†Œë¦¬ (TTS)
                        </label>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <select id="voice" name="voice" class="select" style="flex: 1;">
                                <option value="uyVNoMrnUku1dZyVEXwD" selected>Anna Kim (ì—¬ì„±) - ë¶€ë“œëŸ½ê³  ì°¨ë¶„í•œ ëª©ì†Œë¦¬</option>
                                <option value="8jHHF8rMqMlg8if2mOUe">Han (ë‚¨ì„±) - ëŒ€í™”ì²´, ìì—°ìŠ¤ëŸ¬ìš´ í†¤</option>
                                <option value="s07IwTCOrCDCaETjUVjx">Hyunbin (ë‚¨ì„±) - ëª…í™•í•˜ê³  ì‹ ë¢°ê° ìˆëŠ” ëª©ì†Œë¦¬</option>
                                <option value="3MTvEr8xCMCC2mL9ujrI">June (ë‚¨ì„±) - ì Šê³  í™œê¸°ì°¬ ìŠ¤í† ë¦¬í…”ë§</option>
                            </select>
                            <button type="button" id="preview-voice-btn" class="btn btn-secondary btn-small"
                                style="white-space: nowrap;">
                                ğŸ”Š ìƒ˜í”Œ ë“£ê¸°
                            </button>
                        </div>
                    </div>

                    <script>
                        document.getElementById('preview-voice-btn').addEventListener('click', async () => {
                            const voice = document.getElementById('voice').value;
                            const btn = document.getElementById('preview-voice-btn');

                            // ì¬ìƒ ì¤‘ í‘œì‹œ
                            const originalText = btn.textContent;
                            btn.textContent = 'â³ ë¡œë”©...';
                            btn.disabled = true;

                            try {
                                // [Fix] Worker ëŒ€ì‹  Railway ë°±ì—”ë“œ ì§ì ‘ í˜¸ì¶œ
                                const isLocal = window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1';
                                const baseUrl = isLocal ? '' : 'https://web-production-bb6bf.up.railway.app';
                                const targetUrl = `${baseUrl}/api/sample-voice/${voice}?t=${Date.now()}`;

                                btn.textContent = 'â³ ì—°ê²° ì¤‘...';

                                const response = await fetch(targetUrl);
                                if (!response.ok) {
                                    const errText = await response.text();
                                    throw new Error(`Worker Error (${response.status}): ${errText}`);
                                }

                                const blob = await response.blob();
                                const audioUrl = URL.createObjectURL(blob);
                                const audio = new Audio(audioUrl);

                                await audio.play();
                                btn.textContent = 'ğŸ”Š ì¬ìƒ ì¤‘...';

                                audio.onended = () => {
                                    btn.textContent = originalText;
                                    btn.disabled = false;
                                    URL.revokeObjectURL(audioUrl); // ë©”ëª¨ë¦¬ í•´ì œ
                                };
                            } catch (e) {
                                console.error(e);
                                alert('ë¯¸ë¦¬ë“£ê¸° ì‹¤íŒ¨: ' + e.message);
                                btn.textContent = originalText;
                                btn.disabled = false;
                            }
                        });
                    </script>

                    <!-- ê¸¸ì´ -->
                    <div class="form-group">
                        <label for="duration">
                            <span class="label-icon">â±ï¸</span>
                            ì˜ìƒ ê¸¸ì´: <span id="duration-display">30</span>ì´ˆ
                        </label>
                        <input type="range" id="duration" name="duration" min="30" max="300" value="30" step="10"
                            class="slider" />
                        <div class="slider-labels">
                            <span>1ë¶„</span>
                            <span>2ë¶„</span>
                            <span>3ë¶„</span>
                            <span>4ë¶„</span>
                            <span>5ë¶„</span>
                        </div>
                    </div>

                    <!-- í”Œë«í¼ -->
                    <div class="form-group">
                        <label>
                            <span class="label-icon">ğŸ“±</span>
                            ëŒ€ìƒ í”Œë«í¼
                        </label>
                        <div class="radio-group">
                            <label class="radio-label">
                                <input type="radio" name="platform" value="youtube_long" checked>
                                <span class="radio-custom"></span>
                                YouTube ë¡±í¼ (16:9)
                            </label>
                            <label class="radio-label">
                                <input type="radio" name="platform" value="youtube_shorts">
                                <span class="radio-custom"></span>
                                YouTube Shorts (9:16)
                            </label>
                        </div>
                    </div>

                    <!-- Feature Flags -->
                    <div class="form-group">
                        <label class="section-label">
                            <span class="label-icon">âš™ï¸</span>
                            ê³ ê¸‰ ì„¤ì •
                        </label>

                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" name="ffmpeg_kenburns" id="ffmpeg_kenburns" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸï¸ Ken Burns Effect
                                    <small>ì´ë¯¸ì§€ì— ì¤Œ/íŒ¬ íš¨ê³¼ ì ìš©</small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="ffmpeg_audio_ducking" id="ffmpeg_audio_ducking">
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸ”Š Audio Ducking
                                    <small>ë‚´ë ˆì´ì…˜ ì‹œ BGM ìë™ ê°ì‡ </small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="subtitle_burn_in" id="subtitle_burn_in" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸ“ ìë§‰ ìƒì„± (Subtitles)
                                    <small>ì˜ìƒì— ìë§‰ì„ ì…í™ë‹ˆë‹¤ (ê¸°ë³¸: ì¼œì§)</small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="context_carry_over" id="context_carry_over" checked>
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸ”— Context Carry-over
                                    <small>ì¥ë©´ ê°„ ë§¥ë½ ìƒì† (ì¼ê´€ì„± í–¥ìƒ)</small>
                                </span>
                            </label>

                            <label class="checkbox-label">
                                <input type="checkbox" name="optimization_pack" id="optimization_pack">
                                <span class="checkbox-custom"></span>
                                <span class="checkbox-text">
                                    ğŸš€ Optimization Pack
                                    <small>ì œëª©/ì¸ë„¤ì¼/í•´ì‹œíƒœê·¸ ìë™ ìƒì„± (ì¶”ê°€ API ë¹„ìš©)</small>
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- ì œì¶œ ë²„íŠ¼ -->
                    <button type="submit" class="btn btn-primary" id="generate-story-btn">
                        <span class="btn-icon">ğŸ“</span>
                        ìŠ¤í† ë¦¬ ìƒì„± (1ë‹¨ê³„)
                    </button>
                </form>
            </div>

            <!-- ìŠ¤í† ë¦¬ ë¦¬ë·° ì„¹ì…˜ -->
            <div id="review-section" class="section hidden">
                <h2>ğŸ“ ìŠ¤í† ë¦¬ ê²€í†  ë° ìˆ˜ì •</h2>
                <div class="review-container">
                    <p class="section-description">
                        AIê°€ ìƒì„±í•œ ìŠ¤í† ë¦¬ë¥¼ í™•ì¸í•˜ì„¸ìš”. ëŒ€ì‚¬ë‚˜ ì§€ë¬¸ì„ ììœ ë¡­ê²Œ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                        ìˆ˜ì •ì´ ëë‚˜ë©´ í•˜ë‹¨ì˜ <strong>ì˜ìƒ ìƒì„± ì‹œì‘</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.
                    </p>

                    <div class="story-meta-edit">
                        <label>ì œëª©</label>
                        <input type="text" id="review-title" class="input input-title" />
                    </div>

                    <div id="review-scene-grid" class="review-scene-grid">
                        <!-- Scene Cards (JS Generated) -->
                    </div>

                    <div class="review-actions">
                        <button id="back-to-input-btn" class="btn btn-secondary">
                            <span class="btn-icon">â¬…ï¸</span>
                            ë‹¤ì‹œ ì„¤ì •í•˜ê¸°
                        </button>
                        <button id="generate-images-btn" class="btn btn-primary btn-large">
                            <span class="btn-icon">ğŸ–¼ï¸</span>
                            ì´ë¯¸ì§€ ìƒì„± (2ë‹¨ê³„)
                        </button>
                        <button id="start-video-generation-btn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">ğŸ¬</span>
                            ì´ë¯¸ì§€ ê±´ë„ˆë›°ê³  ì˜ìƒ ìƒì„±
                        </button>
                    </div>
                </div>
            </div>

            <!-- ì´ë¯¸ì§€ í”„ë¦¬ë·° ì„¹ì…˜ -->
            <div id="image-preview-section" class="section hidden">
                <h2>ğŸ–¼ï¸ ì´ë¯¸ì§€ ê²€í† </h2>
                <p class="section-description">
                    ê° ì”¬ì˜ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”. ë§ˆìŒì— ë“¤ì§€ ì•Šìœ¼ë©´ ì¬ìƒì„±í•˜ê±°ë‚˜, I2Vë¡œ ì˜ìƒ ë³€í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                    í™•ì¸ì´ ëë‚˜ë©´ <strong>ì´ë¯¸ì§€ í™•ì • ë° ì˜ìƒ ìƒì„±</strong> ë²„íŠ¼ì„ ëˆ„ë¥´ì„¸ìš”.
                </p>
                <div id="image-preview-grid" class="image-preview-grid"></div>
                <div class="review-actions">
                    <button id="back-to-review-btn" class="btn btn-secondary">
                        <span class="btn-icon">â¬…ï¸</span>
                        ìŠ¤í† ë¦¬ ìˆ˜ì •í•˜ê¸°
                    </button>
                    <button id="approve-images-btn" class="btn btn-primary btn-large">
                        <span class="btn-icon">ğŸ¬</span>
                        ì´ë¯¸ì§€ í™•ì • ë° ì˜ìƒ ìƒì„± (3ë‹¨ê³„)
                    </button>
                </div>
            </div>

            <!-- ì§„í–‰ìƒí™© ì„¹ì…˜ -->
            <div id="progress-section" class="section hidden">
                <h2>â³ ì˜ìƒ ìƒì„± ì¤‘...</h2>

                <div class="progress-container">
                    <!-- ì „ì²´ ì§„í–‰ë¥  -->
                    <div class="progress-header">
                        <span class="progress-label">ì „ì²´ ì§„í–‰ë¥ </span>
                        <span class="progress-percentage" id="progress-percentage">0%</span>
                    </div>
                    <div class="progress-bar-wrapper">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>

                    <!-- í˜„ì¬ ìƒíƒœ -->
                    <div class="status-message" id="status-message">
                        ì´ˆê¸°í™” ì¤‘...
                    </div>

                    <!-- ë‹¨ê³„ë³„ ì§„í–‰ìƒí™© -->
                    <div class="steps-container" id="steps-container">
                        <div class="step" data-step="story">
                            <div class="step-icon">ğŸ“</div>
                            <div class="step-content">
                                <div class="step-title">ìŠ¤í† ë¦¬ ìƒì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>

                        <div class="step" data-step="scenes">
                            <div class="step-icon">ğŸ¬</div>
                            <div class="step-content">
                                <div class="step-title">ì¥ë©´ ì²˜ë¦¬</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>

                        <div class="step" data-step="compose">
                            <div class="step-icon">ğŸï¸</div>
                            <div class="step-content">
                                <div class="step-title">ì˜ìƒ í•©ì„±</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>

                        <div class="step" data-step="optimize">
                            <div class="step-icon">ğŸš€</div>
                            <div class="step-content">
                                <div class="step-title">ìµœì í™”</div>
                                <div class="step-status">ëŒ€ê¸° ì¤‘</div>
                            </div>
                        </div>
                    </div>

                    <!-- ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸° -->
                    <div class="preview-container hidden" id="preview-container">
                        <!-- í†µí•© ìŠ¤í† ë¦¬ ë³´ë“œ -->
                        <div class="visual-preview hidden" id="visual-preview">
                            <h3>ğŸ¬ ìŠ¤í† ë¦¬ ë³´ë“œ (Story Board)</h3>
                            <div class="scene-grid" id="scene-grid">
                                <!-- ìƒì„±ëœ ì”¬ ì¹´ë“œê°€ ì—¬ê¸° ì¶”ê°€ë©ë‹ˆë‹¤ -->
                            </div>
                        </div>
                    </div>

                    <!-- ë¡œê·¸ -->
                    <div class="log-container">
                        <div class="log-header">
                            <span>ğŸ“‹ ì‹¤ì‹œê°„ ë¡œê·¸</span>
                            <button id="clear-log-btn" class="btn-small">ì§€ìš°ê¸°</button>
                        </div>
                        <div class="log-content" id="log-content"></div>
                    </div>
                </div>
            </div>

            <!-- ê²°ê³¼ ì„¹ì…˜ -->
            <div id="result-section" class="section hidden">
                <h2 id="result-header-text">ğŸ‰ ì˜ìƒ ìƒì„± ì™„ë£Œ!</h2>

                <div class="result-container">
                    <!-- í”„ë¡œì íŠ¸ ì •ë³´ -->
                    <div class="result-info">
                        <p><strong>í”„ë¡œì íŠ¸ ID:</strong> <code id="result-project-id"></code></p>
                        <p><strong>ì˜ìƒ ì œëª©:</strong> <span id="result-title"></span></p>
                    </div>

                    <!-- ë¹„ë””ì˜¤ í”Œë ˆì´ì–´ -->
                    <div class="video-player" id="result-video-container">
                        <video id="result-video" controls></video>
                    </div>

                    <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
                    <div class="result-actions">
                        <a id="download-btn" class="btn btn-primary" download>
                            <span class="btn-icon">ğŸ“¥</span>
                            ì˜ìƒ ë‹¤ìš´ë¡œë“œ
                        </a>
                        <button id="new-video-btn" class="btn btn-secondary">
                            <span class="btn-icon">â•</span>
                            ìƒˆ ì˜ìƒ ë§Œë“¤ê¸°
                        </button>
                    </div>

                    <!-- ì”¬ ê´€ë¦¬ ì„¹ì…˜ -->
                    <div id="scene-management" class="scene-management">
                        <h3>ğŸ¬ ì”¬ ê´€ë¦¬</h3>
                        <p class="section-description">
                            ê°œë³„ ì”¬ì„ í™•ì¸í•˜ê³  í•„ìš”ì‹œ ì¬ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            ì”¬ì„ ì¬ìƒì„±í•œ í›„ì—ëŠ” í•˜ë‹¨ì˜ "ì˜ìƒ ì¬í•©ì„±" ë²„íŠ¼ì„ ëˆŒëŸ¬ ìµœì¢… ì˜ìƒì„ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.
                        </p>

                        <!-- ì”¬ ëª©ë¡ ê·¸ë¦¬ë“œ -->
                        <div id="result-scene-grid" class="result-scene-grid">
                            <!-- JSë¡œ ë™ì  ìƒì„± -->
                        </div>

                        <!-- ì¬í•©ì„± ë²„íŠ¼ -->
                        <div class="recompose-actions">
                            <button id="recompose-btn" class="btn btn-primary" style="display: none;">
                                <span class="btn-icon">ğŸ”„</span>
                                ì˜ìƒ ì¬í•©ì„± (ìˆ˜ì •ëœ ì”¬ ë°˜ì˜)
                            </button>
                        </div>
                    </div>

                    <!-- ìµœì í™” íŒ¨í‚¤ì§€ -->
                    <div id="optimization-pack" class="optimization-pack">
                        <h3>ğŸš€ YouTube ìµœì í™” íŒ¨í‚¤ì§€</h3>

                        <!-- ì œëª© í›„ë³´ -->
                        <div class="opt-section">
                            <h4>ğŸ“Œ ì œëª© í›„ë³´</h4>
                            <div id="title-candidates" class="candidate-list"></div>
                        </div>

                        <!-- ì¸ë„¤ì¼ ë¬¸êµ¬ -->
                        <div class="opt-section">
                            <h4>ğŸ–¼ï¸ ì¸ë„¤ì¼ ë¬¸êµ¬</h4>
                            <div id="thumbnail-texts" class="candidate-list"></div>
                        </div>

                        <!-- í•´ì‹œíƒœê·¸ -->
                        <div class="opt-section">
                            <h4>#ï¸âƒ£ í•´ì‹œíƒœê·¸</h4>
                            <div id="hashtags" class="hashtag-list"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- History ì„¹ì…˜ (ë‚´ ë¹„ë””ì˜¤) -->
            <div id="history-section" class="section hidden">
                <h2>ğŸ“º ë‚´ ë¹„ë””ì˜¤ ë³´ê´€í•¨</h2>
                <div class="history-container">
                    <button id="refresh-history-btn" class="btn btn-secondary btn-small" style="margin-bottom: 20px;">
                        ğŸ”„ ëª©ë¡ ìƒˆë¡œê³ ì¹¨
                    </button>
                    <div id="history-grid" class="history-grid">
                        <!-- JSë¡œ ì¹´ë“œ ë¡œë“œ -->
                    </div>
                </div>
            </div>

        </main>

        <!-- í‘¸í„° -->
        <footer class="footer">
            <p>&copy; 2024 STORYCUT v2.0 | AI-Powered Story Video Generator</p>
            <p>
                <a href="https://github.com/yourusername/storycut" target="_blank">GitHub</a> |
                <a href="/docs" target="_blank">API ë¬¸ì„œ</a>
            </p>
        </footer>
    </div>

    <script src="/static/app.js"></script>
</body>

</html>