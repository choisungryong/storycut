# STORYCUT Web UI ì‹¤í–‰ ê°€ì´ë“œ

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜

```bash
# ìƒˆë¡œ ì¶”ê°€ëœ íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install fastapi uvicorn[standard] python-multipart websockets

# ë˜ëŠ” ì „ì²´ requirements ì¬ì„¤ì¹˜
pip install -r requirements.txt
```

### 2. ì„œë²„ ì‹¤í–‰

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰
python api_server.py
```

ì„œë²„ê°€ ì‹œì‘ë˜ë©´ ë‹¤ìŒ ë©”ì‹œì§€ê°€ í‘œì‹œë©ë‹ˆë‹¤:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                 STORYCUT API Server v2.0                  â•‘
â•‘                                                           â•‘
â•‘  ì„œë²„ ì‹œì‘ë¨: http://localhost:8000                       â•‘
â•‘  API ë¬¸ì„œ: http://localhost:8000/docs                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 3. ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ì ‘ì†

```
http://localhost:8000
```

---

## ğŸ“‹ ì£¼ìš” ê¸°ëŠ¥

### 1. ì¥ë¥´ ì„ íƒ
- Emotional, Mystery, Thriller, Fantasy, Horror, Comedy ì¤‘ ì„ íƒ
- ê° ì¥ë¥´ë³„ë¡œ ìµœì í™”ëœ ìŠ¤í† ë¦¬ ìƒì„±

### 2. ì‹¤ì‹œê°„ ì§„í–‰ìƒí™©
WebSocketì„ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ë‹¤ìŒ ë‹¨ê³„ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

```
1. ìŠ¤í† ë¦¬ ìƒì„± (0-15%)
   - GPT-4ë¡œ Scene ê¸°ë°˜ ìŠ¤í† ë¦¬ ìƒì„±
   - ì œëª© ë° ì¥ë©´ êµ¬ì¡° ê²°ì •

2. ì¥ë©´ ì²˜ë¦¬ (15-75%)
   - Scene 1: Hook ë¹„ë””ì˜¤ ë˜ëŠ” ì´ë¯¸ì§€+Ken Burns
   - Scene 2~N: ì´ë¯¸ì§€ ìƒì„± + Ken Burns íš¨ê³¼
   - TTS ë‚´ë ˆì´ì…˜ ìƒì„±

3. ì˜ìƒ í•©ì„± (75-90%)
   - FFmpegë¡œ ëª¨ë“  ì¥ë©´ ì—°ê²°
   - Audio Ducking (ë‚´ë ˆì´ì…˜ ì‹œ BGM ê°ì‡ )
   - Subtitle burn-in

4. ìµœì í™” (90-95%)
   - ì œëª© í›„ë³´ 3ì¢… ìƒì„±
   - ì¸ë„¤ì¼ ë¬¸êµ¬ 3ì¢…
   - í•´ì‹œíƒœê·¸ 10ê°œ
   - AB í…ŒìŠ¤íŠ¸ ë©”íƒ€ë°ì´í„°

5. ì™„ë£Œ (100%)
   - ì˜ìƒ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
   - ìµœì í™” íŒ¨í‚¤ì§€ í™•ì¸
```

### 3. Feature Flags (ê³ ê¸‰ ì„¤ì •)

#### ğŸ¥ Hook Scene ë¹„ë””ì˜¤ (ë¹„ìš© ì¶”ê°€)
- Scene 1ì—ì„œ Runway APIë¡œ ê³ í’ˆì§ˆ ë¹„ë””ì˜¤ ìƒì„±
- ë¹„ìš©: ~$0.50 ì¶”ê°€
- ê¶Œì¥: ì¤‘ìš”í•œ ì˜ìƒì—ë§Œ ì‚¬ìš©

#### ğŸï¸ Ken Burns Effect
- ì´ë¯¸ì§€ì— ì¤Œ/íŒ¬ íš¨ê³¼ ì ìš©
- ì •ì  ì´ë¯¸ì§€ë¥¼ ì˜ìƒì²˜ëŸ¼ í‘œí˜„
- ê¶Œì¥: í•­ìƒ ON

#### ğŸ”Š Audio Ducking
- ë‚´ë ˆì´ì…˜ êµ¬ê°„ì—ì„œ BGM ìë™ ê°ì‡ 
- sidechaincompress í•„í„° ì‚¬ìš©
- ê¶Œì¥: ON (ìì—°ìŠ¤ëŸ¬ìš´ ì˜¤ë””ì˜¤)

#### ğŸ“ ìë§‰ Burn-in
- ìë§‰ì„ ì˜ìƒì— ì§ì ‘ ë Œë”ë§
- SRT íŒŒì¼ ìë™ ìƒì„±
- ê¶Œì¥: ON

#### ğŸ”— Context Carry-over
- ì¥ë©´ ê°„ ë§¥ë½ ìƒì† (ì¸ë¬¼/ì¥ì†Œ/ê°ì •)
- ì¼ê´€ì„± ìˆëŠ” ìŠ¤í† ë¦¬ í‘œí˜„
- ê¶Œì¥: ON

#### ğŸš€ Optimization Pack
- ìœ íŠœë¸Œ ìµœì í™” íŒ¨í‚¤ì§€ ìƒì„±
- ì œëª©/ì¸ë„¤ì¼/í•´ì‹œíƒœê·¸
- ê¶Œì¥: ON

---

## ğŸ¬ ì‚¬ìš© íë¦„

### ë‹¨ê³„ 1: ì…ë ¥
1. ì£¼ì œ ì…ë ¥ (ì„ íƒì‚¬í•­)
2. ì¥ë¥´ ì„ íƒ (í•„ìˆ˜)
3. ë¶„ìœ„ê¸° ì„ íƒ
4. ì˜ìƒ ìŠ¤íƒ€ì¼ ì„ íƒ
5. ê¸¸ì´ ì„¤ì • (30-150ì´ˆ)
6. í”Œë«í¼ ì„ íƒ (YouTube ë¡±í¼/ì‡¼ì¸ )
7. Feature Flags ì„¤ì •
8. "ì˜ìƒ ìƒì„± ì‹œì‘" ë²„íŠ¼ í´ë¦­

### ë‹¨ê³„ 2: ì§„í–‰ìƒí™© í™•ì¸
- ì‹¤ì‹œê°„ ì§„í–‰ë¥  ë°”
- ë‹¨ê³„ë³„ ìƒíƒœ (ìŠ¤í† ë¦¬ â†’ ì¥ë©´ â†’ í•©ì„± â†’ ìµœì í™”)
- ì‹¤ì‹œê°„ ë¡œê·¸ í™•ì¸

### ë‹¨ê³„ 3: ê²°ê³¼ í™•ì¸
- ì˜ìƒ ë¯¸ë¦¬ë³´ê¸°
- ë‹¤ìš´ë¡œë“œ
- ì œëª© í›„ë³´ ë³µì‚¬ (í´ë¦­)
- ì¸ë„¤ì¼ ë¬¸êµ¬ ë³µì‚¬ (í´ë¦­)
- í•´ì‹œíƒœê·¸ ë³µì‚¬ (í´ë¦­)

---

## ğŸ› ï¸ API ì—”ë“œí¬ì¸íŠ¸

### POST `/api/generate`
ì˜ìƒ ìƒì„± ì‹œì‘

**ìš”ì²­ ë³¸ë¬¸:**
```json
{
  "topic": "ì˜¤ë˜ëœ íë³‘ì›ì˜ ë¯¸ìŠ¤í„°ë¦¬",
  "genre": "mystery",
  "mood": "suspenseful",
  "style": "cinematic, high contrast",
  "duration": 60,
  "platform": "youtube_long",
  "hook_scene1_video": false,
  "ffmpeg_kenburns": true,
  "ffmpeg_audio_ducking": false,
  "subtitle_burn_in": true,
  "context_carry_over": true,
  "optimization_pack": true
}
```

**ì‘ë‹µ:**
```json
{
  "project_id": "a1b2c3d4",
  "status": "started",
  "message": "ì˜ìƒ ìƒì„±ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.",
  "ws_url": "/ws/a1b2c3d4"
}
```

### WebSocket `/ws/{project_id}`
ì‹¤ì‹œê°„ ì§„í–‰ìƒí™© ìˆ˜ì‹ 

**ë©”ì‹œì§€ í˜•ì‹:**
```json
{
  "type": "progress",
  "step": "scene_1",
  "progress": 25,
  "message": "Scene 1 ì²˜ë¦¬ ì¤‘...",
  "data": {},
  "timestamp": "2024-01-01T12:00:00"
}
```

### GET `/api/download/{project_id}`
ì™„ì„±ëœ ì˜ìƒ ë‹¤ìš´ë¡œë“œ

### GET `/api/manifest/{project_id}`
í”„ë¡œì íŠ¸ Manifest ì¡°íšŒ

---

## ğŸ”§ ê°œë°œ ëª¨ë“œ

### Hot Reload í™œì„±í™”
```bash
uvicorn api_server:app --reload --host 0.0.0.0 --port 8000
```

### API ë¬¸ì„œ í™•ì¸
```
http://localhost:8000/docs
```
FastAPI ìë™ ìƒì„± Swagger UI

### ë””ë²„ê¹…
```python
# api_server.pyì—ì„œ ë¡œê·¸ ë ˆë²¨ ë³€ê²½
uvicorn.run(
    "api_server:app",
    host="0.0.0.0",
    port=8000,
    reload=True,
    log_level="debug"  # info -> debug
)
```

---

## ğŸ› ë¬¸ì œ í•´ê²°

### 1. WebSocket ì—°ê²° ì‹¤íŒ¨
**ì¦ìƒ:** ì§„í–‰ìƒí™©ì´ ì—…ë°ì´íŠ¸ë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
```bash
# ë°©í™”ë²½ í™•ì¸
# Windows: 8000 í¬íŠ¸ ì—´ê¸°
netsh advfirewall firewall add rule name="STORYCUT" dir=in action=allow protocol=TCP localport=8000
```

### 2. ì˜ìƒ ìƒì„± ì‹¤íŒ¨
**ì¦ìƒ:** "ì˜¤ë¥˜ ë°œìƒ" ë©”ì‹œì§€

**í™•ì¸ì‚¬í•­:**
1. `.env` íŒŒì¼ì— `OPENAI_API_KEY` ì„¤ì • í™•ì¸
2. FFmpeg ì„¤ì¹˜ í™•ì¸: `ffmpeg -version`
3. ë¡œê·¸ í™•ì¸: í„°ë¯¸ë„ ì¶œë ¥

### 3. í¬íŠ¸ ì´ë¯¸ ì‚¬ìš© ì¤‘
**ì¦ìƒ:** `Address already in use`

**í•´ê²°:**
```bash
# í¬íŠ¸ ë³€ê²½
python api_server.py --port 8001

# ë˜ëŠ” ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
# Windows
netstat -ano | findstr :8000
taskkill /PID <PID> /F

# Linux/Mac
lsof -ti:8000 | xargs kill -9
```

### 4. ëŠë¦° ìƒì„± ì†ë„
**ê¶Œì¥ ì‚¬í•­:**
- Hook Scene Video OFF (ë¹„ìš© ì ˆê° + ì†ë„ í–¥ìƒ)
- ì˜ìƒ ê¸¸ì´ 60ì´ˆ ì´í•˜
- GPU ê°€ì† í™œì„±í™” (FFmpeg)

---

## ğŸ“Š ì„±ëŠ¥ ë©”íŠ¸ë¦­

### ì˜ˆìƒ ìƒì„± ì‹œê°„ (60ì´ˆ ì˜ìƒ)

| ë‹¨ê³„ | ì‹œê°„ | ë¹„ìœ¨ |
|------|------|------|
| ìŠ¤í† ë¦¬ ìƒì„± | ~30ì´ˆ | 10% |
| ì¥ë©´ ì²˜ë¦¬ (10ê°œ) | ~3ë¶„ | 60% |
| ì˜ìƒ í•©ì„± | ~30ì´ˆ | 20% |
| ìµœì í™” | ~20ì´ˆ | 10% |
| **í•©ê³„** | **~4-5ë¶„** | 100% |

### ë¹„ìš© (60ì´ˆ ì˜ìƒ)

| í•­ëª© | ë¹„ìš© |
|------|------|
| GPT-4 (ìŠ¤í† ë¦¬) | $0.10 |
| DALL-E 3 (ì´ë¯¸ì§€ 10ì¥) | $0.20 |
| TTS (500ì) | $0.01 |
| **í•©ê³„** | **$0.31** |

Hook ë¹„ë””ì˜¤ ì‚¬ìš© ì‹œ +$0.50 ì¶”ê°€

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

### 1. Cloudflare Worker ë°°í¬
```bash
# wrangler.toml ì„¤ì •
wrangler publish
```

### 2. Cloudflare Pages ë°°í¬
```bash
# web/ ë””ë ‰í† ë¦¬ë¥¼ ì •ì  í˜¸ìŠ¤íŒ…
wrangler pages publish web
```

### 3. D1 ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™
- ì‚¬ìš©ì ê´€ë¦¬
- í”„ë¡œì íŠ¸ íˆìŠ¤í† ë¦¬
- í¬ë ˆë”§ ì‹œìŠ¤í…œ

### 4. ê²°ì œ ì—°ë™
- Stripe Checkout
- í¬ë ˆë”§ êµ¬ë§¤
- êµ¬ë… ëª¨ë¸

---

## ğŸ’¡ íŒ

### ìµœì ì˜ ì„¤ì • (ë¹„ìš© vs í’ˆì§ˆ)

**ìµœì†Œ ë¹„ìš©:**
```
- Hook Scene Video: OFF
- Ken Burns: ON
- Audio Ducking: OFF
- Subtitle: ON
- Context Carry-over: ON
- Optimization: ON
â†’ ë¹„ìš©: ~$0.30
```

**ìµœê³  í’ˆì§ˆ:**
```
- Hook Scene Video: ON
- Ken Burns: ON
- Audio Ducking: ON
- Subtitle: ON
- Context Carry-over: ON
- Optimization: ON
â†’ ë¹„ìš©: ~$0.80
```

**ì¶”ì²œ (ê· í˜•):**
```
- Hook Scene Video: OFF
- Ken Burns: ON
- Audio Ducking: ON
- Subtitle: ON
- Context Carry-over: ON
- Optimization: ON
â†’ ë¹„ìš©: ~$0.35
```

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. í„°ë¯¸ë„ ë¡œê·¸ í™•ì¸
2. ë¸Œë¼ìš°ì € ì½˜ì†” í™•ì¸ (F12)
3. GitHub Issuesì— ì œë³´
4. Discord ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬
