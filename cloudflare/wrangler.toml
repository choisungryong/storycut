# Cloudflare Workers + D1 + R2 설정

name = "storycut-worker"
main = "worker.js"
compatibility_date = "2023-10-25"
workers_dev = true

# D1 Database 바인딩
[[d1_databases]]
binding = "DB"
database_name = "storycut-db"
database_id = "32eba5ea-69eb-4ec8-a5be-f8b5a807b981"

# R2 Storage 바인딩
[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "storycut-videos"

# 환경 변수
[vars]
ENVIRONMENT = "production"
BACKEND_URL = "https://web-production-bb6bf.up.railway.app"

# Secret 환경 변수 (wrangler secret put 명령으로 설정)
# - GOOGLE_CLIENT_ID

# ================================
# Development 환경
# ================================
[env.dev]
name = "storycut-worker-dev"

[env.dev.vars]
ENVIRONMENT = "development"
BACKEND_URL = "http://localhost:8000"

[[env.dev.d1_databases]]
binding = "DB"
database_name = "storycut-db-dev"
database_id = "your-d1-dev-database-id"

[[env.dev.r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "storycut-videos-dev"
